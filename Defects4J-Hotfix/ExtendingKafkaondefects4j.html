<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw);ol{margin:0;padding:0}table td,table th{padding:0}.c54{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:524.2pt;border-top-color:#000000;border-bottom-style:solid}.c51{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:511.5pt;border-top-color:#000000;border-bottom-style:solid}.c31{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:525.8pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:519.8pt;border-top-color:#000000;border-bottom-style:solid}.c37{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:505.5pt;border-top-color:#000000;border-bottom-style:solid}.c48{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:506.2pt;border-top-color:#000000;border-bottom-style:solid}.c26{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:576.8pt;border-top-color:#000000;border-bottom-style:solid}.c53{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:571.5pt;border-top-color:#000000;border-bottom-style:solid}.c42{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:540.8pt;border-top-color:#000000;border-bottom-style:solid}.c43{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:520.5pt;border-top-color:#000000;border-bottom-style:solid}.c50{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:544.5pt;border-top-color:#000000;border-bottom-style:solid}.c44{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:515.2pt;border-top-color:#000000;border-bottom-style:solid}.c46{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:538.5pt;border-top-color:#000000;border-bottom-style:solid}.c41{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:620.2pt;border-top-color:#000000;border-bottom-style:solid}.c40{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:507.8pt;border-top-color:#000000;border-bottom-style:solid}.c34{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:548.2pt;border-top-color:#000000;border-bottom-style:solid}.c32{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c18{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:justify;height:11pt}.c7{background-color:#1f1f1f;padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c24{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:justify}.c36{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:justify}.c30{font-size:9pt;font-family:"Courier New";color:#d4d4d4;font-weight:400}.c1{font-size:9pt;font-family:"Courier New";color:#cccccc;font-weight:400}.c4{background-color:#333333;font-family:"Consolas";color:#d36363;font-weight:400}.c12{background-color:#333333;font-family:"Consolas";color:#888888;font-weight:400}.c19{background-color:#333333;font-family:"Consolas";color:#fcc28c;font-weight:400}.c13{font-size:9pt;font-family:"Courier New";color:#9cdcfe;font-weight:400}.c21{color:#000000;font-weight:400;font-size:11pt;font-family:"Arial"}.c55{background-color:#d9d9d9;color:#000000;font-weight:400;font-family:"Courier New"}.c16{font-size:9pt;font-family:"Courier New";color:#c586c0;font-weight:400}.c49{background-color:#333333;font-family:"Consolas";color:#fc9b9b;font-weight:400}.c35{font-size:9pt;font-family:"Courier New";color:#d16969;font-weight:400}.c29{color:#000000;font-weight:400;font-size:16pt;font-family:"Arial"}.c8{font-size:9pt;font-family:"Courier New";color:#ce9178;font-weight:400}.c11{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c3{background-color:#333333;font-family:"Consolas";color:#a2fca2;font-weight:400}.c45{font-size:9pt;font-family:"Courier New";color:#4ec9b0;font-weight:400}.c20{font-size:9pt;font-family:"Courier New";color:#569cd6;font-weight:400}.c6{font-size:9pt;font-family:"Courier New";color:#dcdcaa;font-weight:400}.c15{color:#808080;font-weight:400;font-size:9pt;font-family:"Courier New"}.c17{font-size:9pt;font-family:"Courier New";color:#d7ba7d;font-weight:400}.c23{color:#6a9955;font-weight:400;font-size:9pt;font-family:"Courier New"}.c22{border-spacing:0;border-collapse:collapse;margin-right:auto}.c27{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:justify}.c10{background-color:#333333;font-family:"Consolas";color:#c6b4f0;font-weight:400}.c2{background-color:#333333;font-family:"Consolas";color:#ade5fc;font-weight:400}.c9{background-color:#333333;font-family:"Consolas";color:#ffffaa;font-weight:400}.c0{background-color:#333333;font-family:"Consolas";color:#ffffff;font-weight:400}.c47{-webkit-text-decoration-skip:none;text-decoration:underline;text-decoration-skip-ink:none}.c52{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c14{text-decoration:none;vertical-align:baseline;font-style:normal}.c33{orphans:2;widows:2}.c39{height:16pt}.c5{height:0pt}.c25{height:11pt}.c38{font-size:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c52 doc-content"><h2 class="c36 c33" id="h.wz5xygdn3l3o"><span class="c29 c14">Step 1: Confirming the Installation of Defects4J</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">First, ensure that Defects4J is correctly installed. Use the following commands to view project information, check out a bug and fixed version, compile, and run tests:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c51" colspan="1" rowspan="1"><p class="c27"><span class="c0">defects4j info -</span><span class="c19">p</span><span class="c0">&nbsp;Lang<br>defects4j info -</span><span class="c19">p</span><span class="c0">&nbsp;Lang -</span><span class="c19">b</span><span class="c0">&nbsp;</span><span class="c4">1</span><span class="c0"><br>defects4j checkout -</span><span class="c19">p</span><span class="c0">&nbsp;Lang -v </span><span class="c4">1</span><span class="c0">b -w /tmp/lang_1_buggy<br>cd /tmp/lang_1_buggy<br>defects4j compile<br>defects4j test<br>defects4j checkout -</span><span class="c19">p</span><span class="c0">&nbsp;Lang -v </span><span class="c4">1</span><span class="c0">f -w /tmp/lang_1_fixed<br>defects4j compile<br>defects4j test</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.y7a2jdbrpzqq"><span class="c29 c14">Step 2: Navigate to the Bug Mining Directory</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Change directory to the bug-mining folder of defects4j and run the following commands to define project parameters:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c37" colspan="1" rowspan="1"><p class="c27"><span class="c0">WORK_DIR=</span><span class="c3">&quot;bug-mining-kafka&quot;</span><span class="c0"><br>PROJECT_ID=</span><span class="c3">&quot;Kafka&quot;</span><span class="c0"><br>PROJECT_NAME=</span><span class="c3">&quot;kafka&quot;</span><span class="c0"><br>REPOSITORY_URL=</span><span class="c3">&quot;https://github.com/apache/kafka.git&quot;</span><span class="c0"><br>ISSUE_TRACKER_NAME=</span><span class="c3">&quot;jira&quot;</span><span class="c0"><br>ISSUE_TRACKER_PROJECT_ID=</span><span class="c3">&quot;KAFKA&quot;</span><span class="c0"><br>BUG_FIX_REGEX=</span><span class="c3">&quot;/(KAFKA-\d+)/mi&quot;</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.lizpfnwbiddc"><span class="c29 c14">Step 3: Initialize the Project and Collect Issues</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Run the initialize-project-and-collect-issues command to generate the active-bugs.csv file:</span></p><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c37" colspan="1" rowspan="1"><p class="c27"><span class="c0">./initialize-project-and-collect-issues.pl -p $PROJECT_ID \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -n $PROJECT_NAME \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -w $WORK_DIR \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -r $REPOSITORY_URL \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -g $ISSUE_TRACKER_NAME \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -t $ISSUE_TRACKER_PROJECT_ID \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e $BUG_FIX_REGEX</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Console output example:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c37" colspan="1" rowspan="1"><p class="c27"><span class="c0">(base) zuohancheng@MacBook-Pro-9 bug-mining % ./initialize-project-and-collect-issues.pl -p </span><span class="c2">$PROJECT_ID</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -n </span><span class="c2">$PROJECT_NAME</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -w </span><span class="c2">$WORK_DIR</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -r </span><span class="c2">$REPOSITORY_URL</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -g </span><span class="c2">$ISSUE_TRACKER_NAME</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -t </span><span class="c2">$ISSUE_TRACKER_PROJECT_ID</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e </span><span class="c2">$BUG_FIX_REGEX</span><span class="c0"><br>Configuring project </span><span class="c19">for</span><span class="c0">&nbsp;Defects4J</span><span class="c9">..........................................</span><span class="c0">&nbsp;OK<br>Collecting all issues </span><span class="c19">from</span><span class="c0">&nbsp;the project issue tracker</span><span class="c9">......................</span><span class="c0">. OK<br>Collecting repository log</span><span class="c9">..................................................</span><span class="c0">&nbsp;OK<br>Cross-referencing the commit log with the issue numbers known </span><span class="c19">to</span><span class="c0">&nbsp;be bugs</span><span class="c9">..</span><span class="c0">. OK<br>Project Kafka has been successfully initialized!</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.3htnf7hsj9ml"><span class="c29 c14">Step 4: Modify Active Bugs CSV</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span>Edit the `defects4j/framework/bug-mining/bug-mining/framework/projects/Kafka/active-bugs.csv` file to </span><span>onl</span><span class="c21 c14">y handle the following bug:</span></p><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c48" colspan="1" rowspan="1"><p class="c27"><span class="c0">bug</span><span class="c2">.id</span><span class="c0">,revision</span><span class="c2">.id.buggy</span><span class="c0">,revision</span><span class="c2">.id.fixed</span><span class="c0">,report</span><span class="c2">.id</span><span class="c0">,report</span><span class="c2">.url</span><span class="c0"><br></span><span class="c4">14265</span><span class="c0">,d62a42df2e24b7e12b7fae2ccd9c2931e62a95ae,fc786c335c6f51a9022b0190b15f57f42e4ea9ab,KAFKA-</span><span class="c4">14265</span><span class="c0">,https:</span><span class="c12">//issues.apache.org/jira/browse/KAFKA-14265</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.wfhrq3e2salg"><span class="c29 c14">Step 5: Modify the Kafka Build XML File</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Edit `defects4j/framework/bug-mining/bug-mining/framework/projects/Kafka/Kafka.build.xml` file as needed:</span></p><p class="c7"><span class="c23 c14">&lt;!--</span></p><p class="c7"><span class="c23 c14">Copyright (c) 2014-2019 Ren&eacute; Just, Darioush Jalali, and Defects4J contributors.</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14">Permission is hereby granted, free of charge, to any person obtaining a copy</span></p><p class="c7"><span class="c23 c14">of this software and associated documentation files (the &quot;Software&quot;), to deal</span></p><p class="c7"><span class="c23 c14">in the Software without restriction, including without limitation the rights</span></p><p class="c7"><span class="c23 c14">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></p><p class="c7"><span class="c23 c14">copies of the Software, and to permit persons to whom the Software is</span></p><p class="c7"><span class="c23 c14">furnished to do so, subject to the following conditions:</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14">The above copyright notice and this permission notice shall be included in</span></p><p class="c7"><span class="c23 c14">all copies or substantial portions of the Software.</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></p><p class="c7"><span class="c23 c14">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></p><p class="c7"><span class="c23 c14">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></p><p class="c7"><span class="c23 c14">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></p><p class="c7"><span class="c23 c14">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></p><p class="c7"><span class="c23 c14">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></p><p class="c7"><span class="c23 c14">THE SOFTWARE.</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14">################################################################################</span></p><p class="c7"><span class="c23 c14">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This is the project-specific build file for Kafka.</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14">It defines project-specific properties and targets, and imports the build file</span></p><p class="c7"><span class="c14 c23">of the checked-out project version.</span></p><p class="c7"><span class="c23 c14">#############################################################################--&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c15">&lt;</span><span class="c20">project</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;D4j-Kafka&quot;</span><span class="c1">&nbsp;</span><span class="c13">basedir</span><span class="c1">=</span><span class="c8">&quot;${basedir}&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Force build in Java 1.8 --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">property</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;build.compiler&quot;</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;javac1.8&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">property</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;junit.jar&quot;</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;${script.dir}/build-scripts/lib/junit-4.11.jar&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Define project-specific properties and paths --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">property</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;source.home&quot;</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;metadata/src/main/java&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">property</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;test.home&quot;</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;metadata/src/test/java&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">property</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;build.home&quot;</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;metadata/build&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">property</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;build.classes&quot;</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;metadata/build/classes/java/main&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">property</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;build.test.classes&quot;</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;metadata/build/classes/java/test&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Check for an existing build.xml --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">available</span><span class="c1">&nbsp;</span><span class="c13">file</span><span class="c1">=</span><span class="c8">&quot;${basedir}/build.xml&quot;</span><span class="c1">&nbsp;</span><span class="c13">property</span><span class="c1">=</span><span class="c8">&quot;ant.exists&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Determine if Gradle should be used --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">property</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;use.gradle&quot;</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;true&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Define compile.classpath --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">path</span><span class="c1">&nbsp;</span><span class="c13">id</span><span class="c1">=</span><span class="c8">&quot;compile.classpath&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">fileset</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${basedir}/${source.home}&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;**/*.java&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">fileset</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">fileset</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${basedir}/${build.classes}&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;**/*.class&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">fileset</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">fileset</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${d4j.home}/framework/projects/${d4j.project.id}/lib&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;**/*.jar&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">fileset</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">path</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Define test.classpath --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">path</span><span class="c1">&nbsp;</span><span class="c13">id</span><span class="c1">=</span><span class="c8">&quot;test.classpath&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">path</span><span class="c1">&nbsp;</span><span class="c13">refid</span><span class="c1">=</span><span class="c8">&quot;compile.classpath&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">fileset</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${basedir}/${test.home}&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;**/*.java&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">fileset</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">fileset</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${basedir}/${build.test.classes}&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;**/*.class&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">fileset</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">fileset</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${d4j.home}/framework/projects/${d4j.project.id}/lib&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;**/*.jar&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">fileset</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">path</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Clean up working directory --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">target</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;clean&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">delete</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${basedir}/compileLib&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">subant</span><span class="c1">&nbsp;</span><span class="c13">target</span><span class="c1">=</span><span class="c8">&quot;clean&quot;</span><span class="c1">&nbsp;</span><span class="c13">verbose</span><span class="c1">=</span><span class="c8">&quot;true&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">fileset</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${basedir}&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;**/build&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">fileset</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">subant</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">target</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Compile the sources using Gradle --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">target</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;gradle.compile&quot;</span><span class="c1">&nbsp;</span><span class="c13">if</span><span class="c1">=</span><span class="c8">&quot;use.gradle&quot;</span><span class="c1">&nbsp;</span><span class="c13">unless</span><span class="c1">=</span><span class="c8">&quot;d4j.mutation&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Call the Gradle build script --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">exec</span><span class="c1">&nbsp;</span><span class="c13">executable</span><span class="c1">=</span><span class="c8">&quot;${basedir}/gradlew&quot;</span><span class="c1">&nbsp;</span><span class="c13">failonerror</span><span class="c1">=</span><span class="c8">&quot;true&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;build&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;-x&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;rat&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;-x&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;test&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">exec</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">exec</span><span class="c1">&nbsp;</span><span class="c13">executable</span><span class="c1">=</span><span class="c8">&quot;${basedir}/gradlew&quot;</span><span class="c1">&nbsp;</span><span class="c13">failonerror</span><span class="c1">=</span><span class="c8">&quot;true&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;--stop&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">exec</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">target</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Compile the tests using Gradle --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">target</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;gradle.compile.tests&quot;</span><span class="c1">&nbsp;</span><span class="c13">if</span><span class="c1">=</span><span class="c8">&quot;use.gradle&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Call the Gradle build script --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">exec</span><span class="c1">&nbsp;</span><span class="c13">executable</span><span class="c1">=</span><span class="c8">&quot;${basedir}/gradlew&quot;</span><span class="c1">&nbsp;</span><span class="c13">failonerror</span><span class="c1">=</span><span class="c8">&quot;true&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;testClasses&quot;</span><span class="c14 c15">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">exec</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">exec</span><span class="c1">&nbsp;</span><span class="c13">executable</span><span class="c1">=</span><span class="c8">&quot;${basedir}/gradlew&quot;</span><span class="c1">&nbsp;</span><span class="c13">failonerror</span><span class="c1">=</span><span class="c8">&quot;true&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;--stop&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">exec</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">target</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Mutate classes if mutation is enabled using Gradle --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">target</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;gradle.compile.mutants&quot;</span><span class="c1">&nbsp;</span><span class="c13">if</span><span class="c1">=</span><span class="c8">&quot;d4j.mutation&quot;</span><span class="c1">&nbsp;</span><span class="c13">unless</span><span class="c1">=</span><span class="c8">&quot;use.ant&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Backup build file and set mutation compiler --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">copy</span><span class="c1">&nbsp;</span><span class="c13">file</span><span class="c1">=</span><span class="c8">&quot;${basedir}/build.gradle&quot;</span><span class="c1">&nbsp;</span><span class="c13">tofile</span><span class="c1">=</span><span class="c8">&quot;${basedir}/build.gradle.bak&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">trycatch</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">try</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">exec</span><span class="c1">&nbsp;</span><span class="c13">executable</span><span class="c1">=</span><span class="c8">&quot;${d4j.home}/framework/projects/${d4j.project.id}/setMutationCompiler.sh&quot;</span><span class="c1">&nbsp;</span><span class="c13">failonerror</span><span class="c1">=</span><span class="c8">&quot;true&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;${basedir}&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;${d4j.home}&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">exec</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Call the Gradle build script --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">exec</span><span class="c1">&nbsp;</span><span class="c13">executable</span><span class="c1">=</span><span class="c8">&quot;${basedir}/gradlew&quot;</span><span class="c1">&nbsp;</span><span class="c13">failonerror</span><span class="c1">=</span><span class="c8">&quot;true&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;build&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;-x&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;test&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">exec</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">exec</span><span class="c1">&nbsp;</span><span class="c13">executable</span><span class="c1">=</span><span class="c8">&quot;${basedir}/gradlew&quot;</span><span class="c1">&nbsp;</span><span class="c13">failonerror</span><span class="c1">=</span><span class="c8">&quot;true&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">arg</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;--stop&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">exec</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">try</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">finally</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Restore the default compiler --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">move</span><span class="c1">&nbsp;</span><span class="c13">file</span><span class="c1">=</span><span class="c8">&quot;${basedir}/build.gradle.bak&quot;</span><span class="c1">&nbsp;</span><span class="c13">tofile</span><span class="c1">=</span><span class="c8">&quot;${basedir}/build.gradle&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">finally</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">trycatch</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">target</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Mutate classes if mutation is enabled using Ant --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">target</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;ant.compile.mutants&quot;</span><span class="c1">&nbsp;</span><span class="c13">if</span><span class="c1">=</span><span class="c8">&quot;d4j.mutation&quot;</span><span class="c1">&nbsp;</span><span class="c13">unless</span><span class="c1">=</span><span class="c8">&quot;use.gradle&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">ant</span><span class="c1">&nbsp;</span><span class="c13">antfile</span><span class="c1">=</span><span class="c8">&quot;${basedir}/build.xml&quot;</span><span class="c1">&nbsp;</span><span class="c13">target</span><span class="c1">=</span><span class="c8">&quot;compile&quot;</span><span class="c1">&nbsp;</span><span class="c13">inheritAll</span><span class="c1">=</span><span class="c8">&quot;true&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">property</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;build.compiler&quot;</span><span class="c1">&nbsp;</span><span class="c13">value</span><span class="c1">=</span><span class="c8">&quot;major.ant.MajorCompiler&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">ant</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">target</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Compile sources --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">target</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;compile&quot;</span><span class="c1">&nbsp;</span><span class="c13">description</span><span class="c1">=</span><span class="c8">&quot;Compile the Kafka source code.&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">antcall</span><span class="c1">&nbsp;</span><span class="c13">target</span><span class="c1">=</span><span class="c8">&quot;gradle.compile&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">antcall</span><span class="c1">&nbsp;</span><span class="c13">target</span><span class="c1">=</span><span class="c8">&quot;gradle.compile.tests&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">antcall</span><span class="c1">&nbsp;</span><span class="c13">target</span><span class="c1">=</span><span class="c8">&quot;gradle.compile.mutants&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">antcall</span><span class="c1">&nbsp;</span><span class="c13">target</span><span class="c1">=</span><span class="c8">&quot;ant.compile.mutants&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">mkdir</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${basedir}/compileLib&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">target</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Compile test cases --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">target</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;compile.tests&quot;</span><span class="c1">&nbsp;</span><span class="c13">description</span><span class="c1">=</span><span class="c8">&quot;Compile the Kafka tests.&quot;</span><span class="c1">&nbsp;</span><span class="c13">depends</span><span class="c1">=</span><span class="c8">&quot;compile&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">antcall</span><span class="c1">&nbsp;</span><span class="c13">target</span><span class="c1">=</span><span class="c8">&quot;gradle.compile.tests&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">target</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- Classpath to run developer-written tests --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">path</span><span class="c1">&nbsp;</span><span class="c13">id</span><span class="c1">=</span><span class="c8">&quot;d4j.test.classpath&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">path</span><span class="c1">&nbsp;</span><span class="c13">refid</span><span class="c1">=</span><span class="c8">&quot;test.classpath&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">pathelement</span><span class="c1">&nbsp;</span><span class="c13">location</span><span class="c1">=</span><span class="c8">&quot;${basedir}/${build.classes}&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">pathelement</span><span class="c1">&nbsp;</span><span class="c13">location</span><span class="c1">=</span><span class="c8">&quot;${basedir}/${build.test.classes}&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">pathelement</span><span class="c1">&nbsp;</span><span class="c13">path</span><span class="c1">=</span><span class="c8">&quot;${junit.jar}&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">fileset</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${d4j.home}/framework/projects/${d4j.project.id}/lib&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;**/*.jar&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">fileset</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">path</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- List of all developer-written tests that reliably pass on the fixed version --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">fileset</span><span class="c1">&nbsp;</span><span class="c13">id</span><span class="c1">=</span><span class="c8">&quot;all.manual.tests&quot;</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${basedir}&quot;</span><span class="c1">&nbsp;</span><span class="c13">excludes</span><span class="c1">=</span><span class="c8">&quot;${d4j.tests.exclude}&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;metadata/src/test/java/**/*.*&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;metadata/build/classes/java/test/**/*.*&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">fileset</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">&lt;!-- List of relevant developer-written tests that reliably pass on the fixed version --&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">fileset</span><span class="c1">&nbsp;</span><span class="c13">id</span><span class="c1">=</span><span class="c8">&quot;rel.manual.tests&quot;</span><span class="c1">&nbsp;</span><span class="c13">dir</span><span class="c1">=</span><span class="c8">&quot;${basedir}&quot;</span><span class="c1">&nbsp;</span><span class="c13">includesfile</span><span class="c1">=</span><span class="c8">&quot;${d4j.dir.projects}/${d4j.project.id}/relevant_tests/${d4j.bug.id}&quot;</span><span class="c15 c14">&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;metadata/src/test/java/**/*.*&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">&lt;</span><span class="c20">include</span><span class="c1">&nbsp;</span><span class="c13">name</span><span class="c1">=</span><span class="c8">&quot;metadata/build/classes/java/test/**/*.*&quot;</span><span class="c15 c14">/&gt;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c15">&lt;/</span><span class="c20">fileset</span><span class="c15 c14">&gt;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c15">&lt;/</span><span class="c20">project</span><span class="c15">&gt;</span></p><p class="c18"><span class="c23 c14"></span></p><h2 class="c36 c33" id="h.nfz4p3eb1ncl"><span class="c29 c14">Step 6: Modify Kafka.pm File</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Edit `defects4j/framework/bug-mining/bug-mining/framework/core/Project/Kafka.pm` file:</span></p><p class="c7"><span class="c23 c14">#-------------------------------------------------------------------------------</span></p><p class="c7"><span class="c23 c14"># Copyright (c) 2014-2019 Ren&eacute; Just, Darioush Jalali, and Defects4J contributors.</span></p><p class="c7"><span class="c23 c14">#</span></p><p class="c7"><span class="c23 c14"># Permission is hereby granted, free of charge, to any person obtaining a copy</span></p><p class="c7"><span class="c23 c14"># of this software and associated documentation files (the &quot;Software&quot;), to deal</span></p><p class="c7"><span class="c23 c14"># in the Software without restriction, including without limitation the rights</span></p><p class="c7"><span class="c23 c14"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></p><p class="c7"><span class="c23 c14"># copies of the Software, and to permit persons to whom the Software is</span></p><p class="c7"><span class="c23 c14"># furnished to do so, subject to the following conditions:</span></p><p class="c7"><span class="c23 c14">#</span></p><p class="c7"><span class="c23 c14"># The above copyright notice and this permission notice shall be included in</span></p><p class="c7"><span class="c23 c14"># all copies or substantial portions of the Software.</span></p><p class="c7"><span class="c23 c14">#</span></p><p class="c7"><span class="c23 c14"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></p><p class="c7"><span class="c23 c14"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></p><p class="c7"><span class="c23 c14"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></p><p class="c7"><span class="c23 c14"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></p><p class="c7"><span class="c23 c14"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></p><p class="c7"><span class="c23 c14"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></p><p class="c7"><span class="c23 c14"># THE SOFTWARE.</span></p><p class="c7"><span class="c23 c14">#-------------------------------------------------------------------------------</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c20 c14">=pod</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c20">=head1</span><span class="c23">&nbsp;</span><span class="c13 c14">NAME</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23">Project::Kafka.pm -- </span><span class="c45">L&lt;</span><span class="c45 c47">Project</span><span class="c45">&gt;</span><span class="c23 c14">&nbsp;submodule for Kafka.</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c20">=head1</span><span class="c23">&nbsp;</span><span class="c13 c14">DESCRIPTION</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14">This module provides all project-specific configurations and methods for the</span></p><p class="c7"><span class="c23 c14">Kafka project.</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c20 c14">=cut</span></p><p class="c7"><span class="c16">package</span><span class="c1">&nbsp;</span><span class="c45">Project::Kafka</span><span class="c1 c14">;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c16">use</span><span class="c1 c14">&nbsp;strict;</span></p><p class="c7"><span class="c16">use</span><span class="c1 c14">&nbsp;warnings;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c16">use</span><span class="c1 c14">&nbsp;Constants;</span></p><p class="c7"><span class="c16">use</span><span class="c1 c14">&nbsp;Vcs::Git;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c20">our</span><span class="c1">&nbsp;</span><span class="c13">@ISA</span><span class="c1">&nbsp;= </span><span class="c8">qw(Project)</span><span class="c1 c14">;</span></p><p class="c7"><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$PID</span><span class="c1">&nbsp; = </span><span class="c8">&quot;Kafka&quot;</span><span class="c1 c14">;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c20">sub</span><span class="c1">&nbsp;</span><span class="c6">new</span><span class="c1 c14">&nbsp;{</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c13">@_</span><span class="c1">&nbsp;== 1 </span><span class="c30">or</span><span class="c1">&nbsp;</span><span class="c16">die</span><span class="c1">&nbsp;</span><span class="c13">$ARG_ERROR</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;(</span><span class="c13">$class</span><span class="c1">) = </span><span class="c13">@_</span><span class="c1 c14">;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$name</span><span class="c1">&nbsp;= </span><span class="c8">&quot;kafka&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$vcs</span><span class="c1">&nbsp; = Vcs::Git</span><span class="c30">-&gt;</span><span class="c1">new(</span><span class="c13">$PID</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">&quot;</span><span class="c13">$REPO_DIR</span><span class="c8">/</span><span class="c13">$name</span><span class="c8">.git&quot;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">&quot;</span><span class="c13">$PROJECTS_DIR</span><span class="c8">/</span><span class="c13">$PID</span><span class="c8">/</span><span class="c13">$BUGS_CSV_ACTIVE</span><span class="c8">&quot;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \&amp;_post_checkout);</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c16">return</span><span class="c1">&nbsp;</span><span class="c13">$class</span><span class="c30">-&gt;</span><span class="c1">SUPER::new(</span><span class="c13">$PID</span><span class="c1">, </span><span class="c13">$name</span><span class="c1">, </span><span class="c13">$vcs</span><span class="c1 c14">);</span></p><p class="c7"><span class="c1 c14">}</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c20">sub</span><span class="c1">&nbsp;</span><span class="c6">_post_checkout</span><span class="c1 c14">&nbsp;{</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;(</span><span class="c13">$self</span><span class="c1">, </span><span class="c13">$rev_id</span><span class="c1">, </span><span class="c13">$work_dir</span><span class="c1">) = </span><span class="c13">@_</span><span class="c1 c14">;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># Change Url to Gradle distribution</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$prop</span><span class="c1">&nbsp;= </span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/gradle/wrapper/gradle-wrapper.properties&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$lib_dir</span><span class="c1">&nbsp;= </span><span class="c8">&quot;</span><span class="c13">$BUILD_SYSTEMS_LIB_DIR</span><span class="c8">/gradle/dists&quot;</span><span class="c1 c14">;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># Read existing Gradle properties file, if it exists</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c6">open</span><span class="c1">(PROP, </span><span class="c8">&quot;&lt;</span><span class="c13">$prop</span><span class="c8">&quot;</span><span class="c1">) </span><span class="c30">or</span><span class="c1">&nbsp;</span><span class="c16">return</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">@tmp</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$gradle_version</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c16">while</span><span class="c1 c14">&nbsp;(&lt;PROP&gt;) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c16">if</span><span class="c1">&nbsp;(</span><span class="c35">/distributionUrl=.*gradle-(.*)-all.zip/</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13">$gradle_version</span><span class="c1">&nbsp;= </span><span class="c13">$1</span><span class="c1">; </span><span class="c23 c14"># Extract the Gradle version</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">push</span><span class="c1">(</span><span class="c13">@tmp</span><span class="c1">, </span><span class="c13">$_</span><span class="c1 c14">);</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp;}</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c6">close</span><span class="c1 c14">(PROP);</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># If gradle_version is found, update distributionUrl</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c16">if</span><span class="c1">&nbsp;(</span><span class="c13">$gradle_version</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c16">for</span><span class="c1">&nbsp;(</span><span class="c13">@tmp</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">s</span><span class="c35">|(distributionUrl=).*|$1file</span><span class="c17">\:</span><span class="c13">$lib_dir</span><span class="c35">/gradle-</span><span class="c13">$gradle_version</span><span class="c35">-all.zip|</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23 c14"># Update properties file</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">open</span><span class="c1">(OUT, </span><span class="c8">&quot;&gt;</span><span class="c13">$prop</span><span class="c8">&quot;</span><span class="c1">) </span><span class="c30">or</span><span class="c1">&nbsp;</span><span class="c16">die</span><span class="c1">&nbsp;</span><span class="c8">&quot;Cannot write properties file&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">print</span><span class="c1">(OUT </span><span class="c13">@tmp</span><span class="c1 c14">);</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">close</span><span class="c1 c14">(OUT);</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;} </span><span class="c16">else</span><span class="c1 c14">&nbsp;{</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">warn</span><span class="c1">&nbsp;</span><span class="c8">&quot;Gradle version not found in </span><span class="c13">$prop</span><span class="c8">&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp;}</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># Disable the Gradle daemon and other properties if gradle.properties exists</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$gradle_properties_file</span><span class="c1">&nbsp;= </span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/gradle.properties&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c16">if</span><span class="c1">&nbsp;(</span><span class="c30">-e</span><span class="c1">&nbsp;</span><span class="c13">$gradle_properties_file</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23 c14"># Read existing Gradle properties file</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">open</span><span class="c1">(GRADLE_PROP, </span><span class="c8">&quot;&lt;</span><span class="c13">$gradle_properties_file</span><span class="c8">&quot;</span><span class="c1">) </span><span class="c30">or</span><span class="c1">&nbsp;</span><span class="c16">die</span><span class="c1">&nbsp;</span><span class="c8">&quot;Cannot open </span><span class="c13">$gradle_properties_file</span><span class="c8">&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">@gradle_prop_lines</span><span class="c1 c14">&nbsp;= &lt;GRADLE_PROP&gt;;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">close</span><span class="c1 c14">(GRADLE_PROP);</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23 c14"># Update properties if they exist, otherwise add them</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">%properties</span><span class="c1 c14">&nbsp;= (</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;org.gradle.parallel&#39;</span><span class="c1">&nbsp;</span><span class="c30">=&gt;</span><span class="c1">&nbsp;</span><span class="c8">&#39;true&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;org.gradle.daemon&#39;</span><span class="c1">&nbsp;</span><span class="c30">=&gt;</span><span class="c1">&nbsp;</span><span class="c8">&#39;false&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;org.gradle.configureondemand&#39;</span><span class="c1">&nbsp;</span><span class="c30">=&gt;</span><span class="c1">&nbsp;</span><span class="c8 c14">&#39;false&#39;</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp; &nbsp; &nbsp;);</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c16">foreach</span><span class="c1">&nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$key</span><span class="c1">&nbsp;(</span><span class="c6">keys</span><span class="c1">&nbsp;</span><span class="c13">%properties</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$found</span><span class="c1 c14">&nbsp;= 0;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c16">for</span><span class="c1">&nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$line</span><span class="c1">&nbsp;(</span><span class="c13">@gradle_prop_lines</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c16">if</span><span class="c1">&nbsp;(</span><span class="c13">$line</span><span class="c1">&nbsp;=~ </span><span class="c35">/^</span><span class="c13">$key</span><span class="c35">=/</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13">$line</span><span class="c1">&nbsp;= </span><span class="c8">&quot;</span><span class="c13">$key</span><span class="c8">=</span><span class="c13">$properties</span><span class="c8">{</span><span class="c13">$key</span><span class="c8">}</span><span class="c17">\n</span><span class="c8">&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13">$found</span><span class="c1 c14">&nbsp;= 1;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c16">last</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">push</span><span class="c1">&nbsp;</span><span class="c13">@gradle_prop_lines</span><span class="c1">, </span><span class="c8">&quot;</span><span class="c13">$key</span><span class="c8">=</span><span class="c13">$properties</span><span class="c8">{</span><span class="c13">$key</span><span class="c8">}</span><span class="c17">\n</span><span class="c8">&quot;</span><span class="c1">&nbsp;</span><span class="c16">unless</span><span class="c1">&nbsp;</span><span class="c13">$found</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23 c14"># Write updated properties back to the file</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">open</span><span class="c1">(GRADLE_PROP, </span><span class="c8">&quot;&gt;</span><span class="c13">$gradle_properties_file</span><span class="c8">&quot;</span><span class="c1">) </span><span class="c30">or</span><span class="c1">&nbsp;</span><span class="c16">die</span><span class="c1">&nbsp;</span><span class="c8">&quot;Cannot write </span><span class="c13">$gradle_properties_file</span><span class="c8">&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">print</span><span class="c1">&nbsp;GRADLE_PROP </span><span class="c13">@gradle_prop_lines</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">close</span><span class="c1 c14">(GRADLE_PROP);</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp;}</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># Enable local repository</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c6">system</span><span class="c1">(</span><span class="c8">&quot;find </span><span class="c13">$work_dir</span><span class="c8">&nbsp;-type f -name </span><span class="c17">\&quot;</span><span class="c8">build.gradle</span><span class="c17">\&quot;</span><span class="c8">&nbsp;-exec sed -i.bak &#39;s|jcenter()|maven { url </span><span class="c17">\&quot;</span><span class="c13">$BUILD_SYSTEMS_LIB_DIR</span><span class="c8">/gradle/deps</span><span class="c17">\&quot;</span><span class="c8">&nbsp;}</span><span class="c17">\\\n</span><span class="c8">&nbsp;maven { url </span><span class="c17">\&quot;</span><span class="c8">https://jcenter.bintray.com/</span><span class="c17">\&quot;</span><span class="c8">&nbsp;}</span><span class="c17">\\\n</span><span class="c8">|g&#39; {} </span><span class="c17">\\</span><span class="c8">;&quot;</span><span class="c1 c14">);</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># # Ensure dependencies are referenced correctly</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># _ensure_dependencies($work_dir);</span></p><p class="c7"><span class="c1 c14">}</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14"># # Ensure dependencies are referenced correctly</span></p><p class="c7"><span class="c23 c14"># sub _ensure_dependencies {</span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; my ($work_dir) = @_;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; my $lib_dir = &quot;$work_dir/build/libs&quot;; &nbsp;# Define the directory to store dependencies</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; # Debug code: Print the lib_dir path</span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; print &quot;Dependency directory: $lib_dir\n&quot;;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; # Traverse each dependency and reference them</span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; opendir my $dir, $lib_dir or die &quot;Cannot open directory: $lib_dir&quot;;</span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; my @dependencies = grep { /\.jar$/ } readdir($dir);</span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; closedir $dir;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; foreach my $jar (@dependencies) {</span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; &nbsp; &nbsp; my $jar_path = &quot;$lib_dir/$jar&quot;;</span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; &nbsp; &nbsp; unless (-e $jar_path) {</span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; die &quot;Dependency $jar is missing in $lib_dir. Please ensure it is placed there.&quot;;</span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c7"><span class="c23 c14"># &nbsp; &nbsp; }</span></p><p class="c7"><span class="c23 c14"># }</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c20">sub</span><span class="c1">&nbsp;</span><span class="c6">determine_layout</span><span class="c1 c14">&nbsp;{</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c13">@_</span><span class="c1">&nbsp;== 2 </span><span class="c30">or</span><span class="c1">&nbsp;</span><span class="c16">die</span><span class="c1">&nbsp;</span><span class="c13">$ARG_ERROR</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;(</span><span class="c13">$self</span><span class="c1">, </span><span class="c13">$rev_id</span><span class="c1">) = </span><span class="c13">@_</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$work_dir</span><span class="c1">&nbsp;= </span><span class="c13">$self</span><span class="c30">-&gt;</span><span class="c1 c14">{prog_root};</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># Define subproject directories</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">@subprojects</span><span class="c1 c14">&nbsp;= (</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;clients&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;connect/api&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;connect/basic-auth-extension&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;connect/file&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;connect/json&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;connect/mirror&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;connect/mirror-client&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;connect/runtime&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;connect/transforms&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;core&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;examples&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;generator&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;jmh-benchmarks&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;log4j-appender&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;metadata&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;raft&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;server-common&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;shell&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;storage&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;storage/api&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/examples&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/streams-scala&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/test-utils&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-0100&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-0101&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-0102&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-0110&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-10&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-11&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-20&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-21&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-22&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-23&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;streams/upgrade-system-tests-24&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;tools&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&#39;trogdor&#39;</span><span class="c1 c14">,</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp;);</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">%layouts</span><span class="c1 c14">;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># Traverse subproject directories and check layouts</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c16">foreach</span><span class="c1">&nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;</span><span class="c13">$subproject</span><span class="c1">&nbsp;(</span><span class="c13">@subprojects</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c16">if</span><span class="c1">&nbsp;(</span><span class="c30">-e</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/</span><span class="c13">$subproject</span><span class="c8">/src/main/java&quot;</span><span class="c1">&nbsp;&amp;&amp; </span><span class="c30">-e</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/</span><span class="c13">$subproject</span><span class="c8">/src/test/java&quot;</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13">$layouts</span><span class="c1">{</span><span class="c13">$subproject</span><span class="c1">} = { src </span><span class="c30">=&gt;</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$subproject</span><span class="c8">/src/main/java&quot;</span><span class="c1">, test </span><span class="c30">=&gt;</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$subproject</span><span class="c8">/src/test/java&quot;</span><span class="c1 c14">&nbsp;};</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c16">else</span><span class="c1 c14">&nbsp;{</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">print</span><span class="c1">&nbsp;</span><span class="c8">&quot;Skipping subproject: </span><span class="c13">$subproject</span><span class="c8">&nbsp;(either source or test directory not found)</span><span class="c17">\n</span><span class="c8">&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp;}</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># Default layout</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c16">unless</span><span class="c1">&nbsp;(</span><span class="c13">%layouts</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c16">if</span><span class="c1">&nbsp;(</span><span class="c30">-e</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/src/main/java&quot;</span><span class="c1">&nbsp;&amp;&amp; </span><span class="c30">-e</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/src/test/java&quot;</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13">$layouts</span><span class="c1">{main} = { src </span><span class="c30">=&gt;</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/src/main/java&quot;</span><span class="c1">, test </span><span class="c30">=&gt;</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/src/test/java&quot;</span><span class="c1 c14">&nbsp;};</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c16">elsif</span><span class="c1">&nbsp;(</span><span class="c30">-e</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/src&quot;</span><span class="c1">&nbsp;&amp;&amp; </span><span class="c30">-e</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/test&quot;</span><span class="c1 c14">) {</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13">$layouts</span><span class="c1">{main} = { src </span><span class="c30">=&gt;</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/src&quot;</span><span class="c1">, test </span><span class="c30">=&gt;</span><span class="c1">&nbsp;</span><span class="c8">&quot;</span><span class="c13">$work_dir</span><span class="c8">/test&quot;</span><span class="c1 c14">&nbsp;};</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c16">else</span><span class="c1 c14">&nbsp;{</span></p><p class="c7"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c16">die</span><span class="c1">&nbsp;</span><span class="c8">&quot;Unknown directory layout&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c7"><span class="c1 c14">&nbsp; &nbsp;}</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c16">return</span><span class="c1">&nbsp;\</span><span class="c13">%layouts</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1 c14">}</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c20">sub</span><span class="c1">&nbsp;</span><span class="c6">_ant_call</span><span class="c1 c14">&nbsp;{</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c13">@_</span><span class="c1">&nbsp;&gt;= 2 </span><span class="c30">or</span><span class="c1">&nbsp;</span><span class="c16">die</span><span class="c1">&nbsp;</span><span class="c13">$ARG_ERROR</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c20">my</span><span class="c1">&nbsp;(</span><span class="c13">$self</span><span class="c1">, </span><span class="c13">$target</span><span class="c1">, </span><span class="c13">$option_str</span><span class="c1">, </span><span class="c13">$log_file</span><span class="c1">) = &nbsp;</span><span class="c13">@_</span><span class="c1 c14">;</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># By default gradle uses $HOME/.gradle, which causes problems when multiple</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># instances of gradle run at the same time.</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14">#</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># TODO: Extract all exported environment variables into a user-visible</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c23 c14"># config file.</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c13">$ENV</span><span class="c1">{</span><span class="c8">&#39;GRADLE_USER_HOME&#39;</span><span class="c1">} = </span><span class="c8">&quot;</span><span class="c13">$self</span><span class="c8">-&gt;{prog_root}/</span><span class="c13">$GRADLE_LOCAL_HOME_DIR</span><span class="c8">&quot;</span><span class="c1 c14">;</span></p><p class="c7"><span class="c1">&nbsp; &nbsp;</span><span class="c16">return</span><span class="c1">&nbsp;</span><span class="c13">$self</span><span class="c30">-&gt;</span><span class="c1">SUPER::_ant_call(</span><span class="c13">$target</span><span class="c1">, </span><span class="c13">$option_str</span><span class="c1">, </span><span class="c13">$log_file</span><span class="c1 c14">);</span></p><p class="c7"><span class="c1 c14">}</span></p><p class="c7 c25"><span class="c1 c14"></span></p><p class="c7"><span class="c1 c14">1;</span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.6iuvq6dmv4m0"><span class="c29 c14">Step 7: Modify initialize-revisions.pl</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Edit `framework/bug-mining/initialize-revisions.pl` to support sanity checks for Gradle projects:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c40" colspan="1" rowspan="1"><p class="c27"><span class="c12">#!/usr/bin/env perl</span><span class="c0"><br></span><span class="c12">#</span><span class="c0"><br></span><span class="c12">#-------------------------------------------------------------------------------</span><span class="c0"><br></span><span class="c12"># Copyright (c) 2014-2019 Ren&eacute; Just, Darioush Jalali, and Defects4J contributors.</span><span class="c0"><br></span><span class="c12">#</span><span class="c0"><br></span><span class="c12"># Permission is hereby granted, free of charge, to any person obtaining a copy</span><span class="c0"><br></span><span class="c12"># of this software and associated documentation files (the &quot;Software&quot;), to deal</span><span class="c0"><br></span><span class="c12"># in the Software without restriction, including without limitation the rights</span><span class="c0"><br></span><span class="c12"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span><span class="c0"><br></span><span class="c12"># copies of the Software, and to permit persons to whom the Software is</span><span class="c0"><br></span><span class="c12"># furnished to do so, subject to the following conditions:</span><span class="c0"><br></span><span class="c12">#</span><span class="c0"><br></span><span class="c12"># The above copyright notice and this permission notice shall be included in</span><span class="c0"><br></span><span class="c12"># all copies or substantial portions of the Software.</span><span class="c0"><br></span><span class="c12">#</span><span class="c0"><br></span><span class="c12"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span><span class="c0"><br></span><span class="c12"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span><span class="c0"><br></span><span class="c12"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span><span class="c0"><br></span><span class="c12"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span><span class="c0"><br></span><span class="c12"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span><span class="c0"><br></span><span class="c12"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span><span class="c0"><br></span><span class="c12"># THE SOFTWARE.</span><span class="c0"><br></span><span class="c12">#-------------------------------------------------------------------------------</span><span class="c0"><br><br></span><span class="c12">=pod<br><br>=head1 NAME<br><br>initialize-revisions.pl -- Initialize all revisions: identify the directory<br>layout and perform a sanity check for each revision.<br><br>=head1 SYNOPSIS<br><br>initialize-revisions.pl -p project_id -w work_dir [-s subproject] [ -b bug_id] [-D]<br><br>=head1 OPTIONS<br><br>=over 4<br><br>=item B&lt;-p C&lt;project_id&gt;&gt;<br><br>The id of the project for which the meta data should be generated.<br><br>=item B&lt;-w F&lt;work_dir&gt;&gt;<br><br>The working directory used for the bug-mining process.<br><br>=item B&lt;-s F&lt;subproject&gt;&gt;<br><br>The subproject to be mined (if not the root directory)<br><br>=item B&lt;-b C&lt;bug_id&gt;&gt;<br><br>Only analyze this bug id. The bug_id has to follow the format B&lt;(\d+)(:(\d+))?&gt;.<br>Per default all bug ids, listed in the active-bugs csv, are considered.<br><br>=item B&lt;-D&gt;<br><br>Debug: Enable verbose logging and do not delete the temporary check-out directory<br>(optional).<br><br>=back<br><br>=cut</span><span class="c0"><br></span><span class="c19">use</span><span class="c0">&nbsp;warnings;<br></span><span class="c19">use</span><span class="c0">&nbsp;strict;<br></span><span class="c19">use</span><span class="c0">&nbsp;File::Basename;<br></span><span class="c19">use</span><span class="c0">&nbsp;Cwd </span><span class="c3">qw(abs_path)</span><span class="c0">;<br></span><span class="c19">use</span><span class="c0">&nbsp;Getopt::Std;<br></span><span class="c19">use</span><span class="c0">&nbsp;Pod::Usage;<br><br></span><span class="c19">use</span><span class="c0">&nbsp;lib (dirname(abs_path(__FILE_</span><span class="c4">_</span><span class="c0">)) . </span><span class="c3">&quot;/../core/&quot;</span><span class="c0">);<br></span><span class="c19">use</span><span class="c0">&nbsp;Constants;<br></span><span class="c19">use</span><span class="c0">&nbsp;Project;<br></span><span class="c19">use</span><span class="c0">&nbsp;DB;<br></span><span class="c19">use</span><span class="c0">&nbsp;Utils;<br><br></span><span class="c19">my</span><span class="c0">&nbsp;%cmd_opts;<br>getopts(</span><span class="c3">&#39;p:b:w:s:D&#39;</span><span class="c0">, \%cmd_opts) </span><span class="c19">or</span><span class="c0">&nbsp;pod2usage(</span><span class="c4">1</span><span class="c0">);<br><br>pod2usage(</span><span class="c4">1</span><span class="c0">) </span><span class="c19">unless</span><span class="c0">&nbsp;</span><span class="c19">defined</span><span class="c0">&nbsp;$cmd_opts</span><span class="c3">{p}</span><span class="c0">&nbsp;</span><span class="c19">and</span><span class="c0">&nbsp;</span><span class="c19">defined</span><span class="c0">&nbsp;$cmd_opts</span><span class="c3">{w}</span><span class="c0">;<br><br></span><span class="c19">my</span><span class="c0">&nbsp;$PID = $cmd_opts</span><span class="c3">{p}</span><span class="c0">;<br></span><span class="c19">my</span><span class="c0">&nbsp;$BID = $cmd_opts</span><span class="c3">{b}</span><span class="c0">;<br></span><span class="c19">my</span><span class="c0">&nbsp;$WORK_DIR = abs_path($cmd_opts</span><span class="c3">{w}</span><span class="c0">);<br></span><span class="c19">my</span><span class="c0">&nbsp;$SUBPROJ = $cmd_opts</span><span class="c3">{s}</span><span class="c0">;<br>$DEBUG = </span><span class="c4">1</span><span class="c0">&nbsp;</span><span class="c19">if</span><span class="c0">&nbsp;</span><span class="c19">defined</span><span class="c0">&nbsp;$cmd_opts</span><span class="c3">{D}</span><span class="c0">;<br><br></span><span class="c12"># Check format of target bug id</span><span class="c0"><br></span><span class="c19">if</span><span class="c0">&nbsp;(</span><span class="c19">defined</span><span class="c0">&nbsp;$BID) {<br> &nbsp; &nbsp;$BID =~ </span><span class="c10">/^(\d+)(:(\d+))?$/</span><span class="c0">&nbsp;</span><span class="c19">or</span><span class="c0">&nbsp;</span><span class="c19">die</span><span class="c0">&nbsp;</span><span class="c3">&quot;Wrong version id format ((\\d+)(:(\\d+))?): $BID!&quot;</span><span class="c0">;<br>}<br><br></span><span class="c12"># Add script and core directory to @INC</span><span class="c0"><br></span><span class="c19">unshift</span><span class="c0">(@INC, </span><span class="c3">&quot;$WORK_DIR/framework/core&quot;</span><span class="c0">);<br><br></span><span class="c12"># Override global constants</span><span class="c0"><br>$REPO_DIR = </span><span class="c3">&quot;$WORK_DIR/project_repos&quot;</span><span class="c0">;<br>$PROJECTS_DIR = </span><span class="c3">&quot;$WORK_DIR/framework/projects&quot;</span><span class="c0">;<br><br></span><span class="c12"># Create necessary directories</span><span class="c0"><br></span><span class="c19">my</span><span class="c0">&nbsp;$PROJECT_DIR = </span><span class="c3">&quot;$PROJECTS_DIR/$PID&quot;</span><span class="c0">;<br></span><span class="c19">my</span><span class="c0">&nbsp;$PATCH_DIR &nbsp; = </span><span class="c3">&quot;$PROJECT_DIR/patches&quot;</span><span class="c0">;<br></span><span class="c19">my</span><span class="c0">&nbsp;$ANALYZER_OUTPUT = </span><span class="c3">&quot;$PROJECT_DIR/analyzer_output&quot;</span><span class="c0">;<br></span><span class="c19">my</span><span class="c0">&nbsp;$GEN_BUILDFILE_DIR = </span><span class="c3">&quot;$PROJECT_DIR/build_files&quot;</span><span class="c0">;<br><br>-d $PROJECT_DIR </span><span class="c19">or</span><span class="c0">&nbsp;</span><span class="c19">die</span><span class="c0">&nbsp;</span><span class="c3">&quot;$PROJECT_DIR does not exist: $!&quot;</span><span class="c0">;<br>-d $PATCH_DIR </span><span class="c19">or</span><span class="c0">&nbsp;</span><span class="c19">die</span><span class="c0">&nbsp;</span><span class="c3">&quot;$PATCH_DIR does not exist: $!&quot;</span><span class="c0">;<br><br></span><span class="c19">system</span><span class="c0">(</span><span class="c3">&quot;mkdir -p $ANALYZER_OUTPUT $GEN_BUILDFILE_DIR&quot;</span><span class="c0">);<br><br></span><span class="c12"># Temporary directory</span><span class="c0"><br></span><span class="c19">my</span><span class="c0">&nbsp;$TMP_DIR = Utils::get_tmp_dir();<br></span><span class="c19">system</span><span class="c0">(</span><span class="c3">&quot;mkdir -p $TMP_DIR&quot;</span><span class="c0">);<br><br></span><span class="c12"># Set up project</span><span class="c0"><br></span><span class="c19">my</span><span class="c0">&nbsp;$project = Project::create_project($PID);<br><br></span><span class="c12">#</span><span class="c0"><br></span><span class="c12"># Initialize a specific version id.</span><span class="c0"><br></span><span class="c12">#</span><span class="c0"><br></span><span class="c19">sub</span><span class="c0">&nbsp;_</span><span class="c9">init_version</span><span class="c0">&nbsp;{<br> &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;($project, $bid, $vid) = @_;<br><br> &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;$work_dir = </span><span class="c3">&quot;${TMP_DIR}/${vid}&quot;</span><span class="c0">;<br> &nbsp; &nbsp;$project-&gt;{prog_root} = $work_dir;<br><br> &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;$rev_id = $project-&gt;lookup(</span><span class="c3">&quot;${vid}&quot;</span><span class="c0">);<br><br> &nbsp; &nbsp;</span><span class="c12"># Use the VCS checkout routine, which does not apply the cached, possibly</span><span class="c0"><br> &nbsp; &nbsp;</span><span class="c12"># minimized patch to obtain the buggy version.</span><span class="c0"><br> &nbsp; &nbsp;$project-&gt;{_vcs}-&gt;checkout_vid(</span><span class="c3">&quot;${vid}&quot;</span><span class="c0">, $work_dir) </span><span class="c19">or</span><span class="c0">&nbsp;</span><span class="c19">die</span><span class="c0">&nbsp;</span><span class="c3">&quot;Cannot checkout $vid version&quot;</span><span class="c0">;<br><br> &nbsp; &nbsp;</span><span class="c19">if</span><span class="c0">&nbsp;(</span><span class="c19">defined</span><span class="c0">&nbsp;$SUBPROJ) {<br> &nbsp; &nbsp; &nbsp; &nbsp;$work_dir .= </span><span class="c3">&quot;/$SUBPROJ/&quot;</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;$project-&gt;{prog_root} = $work_dir;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c19">system</span><span class="c0">(</span><span class="c3">&quot;mkdir -p $ANALYZER_OUTPUT/$bid&quot;</span><span class="c0">);<br> &nbsp; &nbsp;</span><span class="c19">if</span><span class="c0">&nbsp;(-e </span><span class="c3">&quot;$work_dir/build.xml&quot;</span><span class="c0">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;$cmd = </span><span class="c3">&quot; cd $work_dir&quot;</span><span class="c0">&nbsp;.<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot; &amp;&amp; java -jar $LIB_DIR/analyzer.jar $work_dir $ANALYZER_OUTPUT/$bid build.xml 2&gt;&amp;1&quot;</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;Utils::exec_cmd($cmd, </span><span class="c3">&quot;Run build-file analyzer on build.xml.&quot;</span><span class="c0">);<br> &nbsp; &nbsp;} </span><span class="c19">elsif</span><span class="c0">&nbsp;(-e </span><span class="c3">&quot;$work_dir/pom.xml&quot;</span><span class="c0">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># Run maven-ant plugin and overwrite the original build.xml whenever a maven build file exists</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;$cmd = </span><span class="c3">&quot; cd $work_dir&quot;</span><span class="c0">&nbsp;.<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot; &amp;&amp; mvn ant:ant -Doverwrite=true 2&gt;&amp;1 -Dhttps.protocols=TLSv1.2&quot;</span><span class="c0">&nbsp;.<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot; &amp;&amp; patch build.xml $PROJECT_DIR/build.xml.patch 2&gt;&amp;1&quot;</span><span class="c0">&nbsp;.<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot; &amp;&amp; rm -rf $GEN_BUILDFILE_DIR/$rev_id &amp;&amp; mkdir -p $GEN_BUILDFILE_DIR/$rev_id 2&gt;&amp;1&quot;</span><span class="c0">&nbsp;.<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot; &amp;&amp; cp maven-build.* $GEN_BUILDFILE_DIR/$rev_id 2&gt;&amp;1&quot;</span><span class="c0">&nbsp;.<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot; &amp;&amp; cp build.xml $GEN_BUILDFILE_DIR/$rev_id 2&gt;&amp;1&quot;</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;Utils::exec_cmd($cmd, </span><span class="c3">&quot;Convert Maven to Ant build file: &quot;</span><span class="c0">&nbsp;. $rev_id) </span><span class="c19">or</span><span class="c0">&nbsp;</span><span class="c19">die</span><span class="c0">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$cmd = </span><span class="c3">&quot; cd $work_dir&quot;</span><span class="c0">&nbsp;.<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">&quot; &amp;&amp; java -jar $LIB_DIR/analyzer.jar $work_dir $ANALYZER_OUTPUT/$bid maven-build.xml 2&gt;&amp;1&quot;</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;Utils::exec_cmd($cmd, </span><span class="c3">&quot;Run build-file analyzer on maven-ant.xml.&quot;</span><span class="c0">) </span><span class="c19">or</span><span class="c0">&nbsp;</span><span class="c19">die</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># Fix broken dependency links</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;$fix_dep = </span><span class="c3">&quot;cd $work_dir &amp;&amp; sed \&#39;s\/https:\\/\\/oss\\.sonatype\\.org\\/content\\/repositories\\/snapshots\\//http:\\/\\/central\\.maven\\.org\\/maven2\\/\/g\&#39; maven-build.xml &gt;&gt; temp &amp;&amp; mv temp maven-build.xml&quot;</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;Utils::exec_cmd($fix_dep, </span><span class="c3">&quot;Fixing broken dependency links.&quot;</span><span class="c0">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># Get dependencies if it is maven-ant project</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;$download_dep = </span><span class="c3">&quot;cd $work_dir &amp;&amp; ant -Dmaven.repo.local=\&quot;$PROJECT_DIR/lib\&quot; get-deps&quot;</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;Utils::exec_cmd($download_dep, </span><span class="c3">&quot;Download dependencies for maven-ant.xml.&quot;</span><span class="c0">);<br> &nbsp; &nbsp;} </span><span class="c19">elsif</span><span class="c0">&nbsp;(-e </span><span class="c3">&quot;$work_dir/build.gradle&quot;</span><span class="c0">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">print</span><span class="c0">&nbsp;</span><span class="c3">&quot;Found build.gradle\n&quot;</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;$cmd = </span><span class="c3">&quot; cd $work_dir&quot;</span><span class="c0">&nbsp;.<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot; &amp;&amp; ./gradlew clean assemble --stacktrace --debug 2&gt;&amp;1&quot;</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;Utils::exec_cmd($cmd, </span><span class="c3">&quot;Run Gradle build: &quot;</span><span class="c0">&nbsp;. $rev_id) </span><span class="c19">or</span><span class="c0">&nbsp;</span><span class="c19">die</span><span class="c0">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># Ensure the analyzer output directory exists</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">system</span><span class="c0">(</span><span class="c3">&quot;mkdir -p $ANALYZER_OUTPUT/$bid&quot;</span><span class="c0">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">print</span><span class="c0">&nbsp;</span><span class="c3">&quot;Created analyzer_output directory: $ANALYZER_OUTPUT/$bid\n&quot;</span><span class="c0">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># This line is commented out as the current analyzer.jar does not support Gradle</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># You might need to implement a similar analyzer for Gradle or handle this manually</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># $cmd = &quot; cd $work_dir&quot; .</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># &nbsp; &nbsp; &nbsp; &nbsp;&quot; &amp;&amp; java -jar $LIB_DIR/analyzer.jar $work_dir $ANALYZER_OUTPUT/$bid build.gradle 2&gt;&amp;1&quot;;</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># Utils::exec_cmd($cmd, &quot;Run build-file analyzer on build.gradle.&quot;) or die;</span><span class="c0"><br> &nbsp; &nbsp;} </span><span class="c19">else</span><span class="c0">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># TODO add support for other build systems</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">die</span><span class="c0">&nbsp;</span><span class="c3">&quot;Unsupported build system&quot;</span><span class="c0">;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c12"># Ensure determine_layout is called and prints output</span><span class="c0"><br> &nbsp; &nbsp;</span><span class="c19">print</span><span class="c0">&nbsp;</span><span class="c3">&quot;Calling determine_layout for revision: $rev_id\n&quot;</span><span class="c0">;<br> &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;$layout = $project-&gt;determine_layout($rev_id);<br> &nbsp; &nbsp;</span><span class="c19">print</span><span class="c0">&nbsp;</span><span class="c3">&quot;Layout: src -&gt; $layout-&gt;{src}, test -&gt; $layout-&gt;{test}\n&quot;</span><span class="c0">;<br><br> &nbsp; &nbsp;$project-&gt;initialize_revision($rev_id, </span><span class="c3">&quot;${vid}&quot;</span><span class="c0">);<br><br> &nbsp; &nbsp;</span><span class="c19">return</span><span class="c0">&nbsp;($rev_id, $project-&gt;src_dir(</span><span class="c3">&quot;${vid}&quot;</span><span class="c0">), $project-&gt;test_dir(</span><span class="c3">&quot;${vid}&quot;</span><span class="c0">));<br>}<br><br></span><span class="c12">#</span><span class="c0"><br></span><span class="c12"># The Defects4J core framework requires certain metadata for each defect. This</span><span class="c0"><br></span><span class="c12"># routine creates these artifacts, if necessary.</span><span class="c0"><br></span><span class="c12">#</span><span class="c0"><br></span><span class="c19">sub</span><span class="c0">&nbsp;_</span><span class="c9">bootstrap</span><span class="c0">&nbsp;{<br> &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;($project, $bid) = @_;<br><br> &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;($v1, $src_b, $test_b) = _init_version($project, $bid, </span><span class="c3">&quot;${bid}b&quot;</span><span class="c0">);<br> &nbsp; &nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;($v2, $src_f, $test_f) = _init_version($project, $bid, </span><span class="c3">&quot;${bid}f&quot;</span><span class="c0">);<br><br> &nbsp; &nbsp;</span><span class="c19">die</span><span class="c0">&nbsp;</span><span class="c3">&quot;Source directories don&#39;t match for buggy and fixed revisions of $bid&quot;</span><span class="c0">&nbsp;</span><span class="c19">unless</span><span class="c0">&nbsp;$src_b eq $src_f;<br> &nbsp; &nbsp;</span><span class="c19">die</span><span class="c0">&nbsp;</span><span class="c3">&quot;Test directories don&#39;t match for buggy and fixed revisions of $bid&quot;</span><span class="c0">&nbsp;</span><span class="c19">unless</span><span class="c0">&nbsp;$test_b eq $test_f;<br><br> &nbsp; &nbsp;</span><span class="c12"># Create local patch so that we can use the D4J core framework.</span><span class="c0"><br> &nbsp; &nbsp;</span><span class="c12"># Minimization doesn&#39;t matter here, which has to be done manually.</span><span class="c0"><br> &nbsp; &nbsp;$project-&gt;export_diff($v2, $v1, </span><span class="c3">&quot;$PATCH_DIR/$bid.src.patch&quot;</span><span class="c0">, </span><span class="c3">&quot;$src_f&quot;</span><span class="c0">);<br> &nbsp; &nbsp;$project-&gt;export_diff($v2, $v1, </span><span class="c3">&quot;$PATCH_DIR/$bid.test.patch&quot;</span><span class="c0">, </span><span class="c3">&quot;$test_f&quot;</span><span class="c0">);<br>}<br><br></span><span class="c19">my</span><span class="c0">&nbsp;@ids = $project-&gt;get_bug_ids();<br></span><span class="c19">if</span><span class="c0">&nbsp;(</span><span class="c19">defined</span><span class="c0">&nbsp;$BID) {<br> &nbsp; &nbsp;</span><span class="c19">if</span><span class="c0">&nbsp;($BID =~ </span><span class="c10">/(\d+):(\d+)/</span><span class="c0">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;@ids = </span><span class="c19">grep</span><span class="c0">&nbsp;{ ($1 &lt;= $_) &amp;&amp; ($_ &lt;= $2) } @ids;<br> &nbsp; &nbsp;} </span><span class="c19">else</span><span class="c0">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12"># single bid</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;@ids = </span><span class="c19">grep</span><span class="c0">&nbsp;{ ($BID == $_) } @ids;<br> &nbsp; &nbsp;}<br>}<br></span><span class="c19">foreach</span><span class="c0">&nbsp;</span><span class="c19">my</span><span class="c0">&nbsp;$bid (@ids) {<br> &nbsp; &nbsp;</span><span class="c19">printf</span><span class="c0">&nbsp;(</span><span class="c3">&quot;%4d: $project-&gt;{prog_name}\n&quot;</span><span class="c0">, $bid);<br><br> &nbsp; &nbsp;</span><span class="c12"># Clean up previously generated data</span><span class="c0"><br> &nbsp; &nbsp;</span><span class="c19">system</span><span class="c0">(</span><span class="c3">&quot;rm -rf $ANALYZER_OUTPUT/${bid} $PATCH_DIR/${bid}.src.patch $PATCH_DIR/${bid}.test.patch&quot;</span><span class="c0">);<br><br> &nbsp; &nbsp;</span><span class="c12"># Populate the layout map and patches directory</span><span class="c0"><br> &nbsp; &nbsp;_bootstrap($project, $bid);<br><br> &nbsp; &nbsp;</span><span class="c12"># Defects4J cannot handle empty patch files -&gt; skip the sanity check since</span><span class="c0"><br> &nbsp; &nbsp;</span><span class="c12"># these candidates are filtered in a later step anyway.</span><span class="c0"><br> &nbsp; &nbsp;</span><span class="c19">if</span><span class="c0">&nbsp;(-z </span><span class="c3">&quot;$PATCH_DIR/$bid.src.patch&quot;</span><span class="c0">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">printf</span><span class="c0">(</span><span class="c3">&quot; &nbsp; &nbsp; &nbsp;-&gt; Skipping sanity check (empty source patch)\n&quot;</span><span class="c0">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">next</span><span class="c0">;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c12"># Clean the temporary directory</span><span class="c0"><br> &nbsp; &nbsp;Utils::exec_cmd(</span><span class="c3">&quot;rm -rf $TMP_DIR &amp;&amp; mkdir -p $TMP_DIR&quot;</span><span class="c0">, </span><span class="c3">&quot;Cleaning working directory&quot;</span><span class="c0">)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c19">or</span><span class="c0">&nbsp;</span><span class="c19">die</span><span class="c0">&nbsp;</span><span class="c3">&quot;Cannot clean working directory&quot;</span><span class="c0">;<br> &nbsp; &nbsp;$project-&gt;{prog_root} = $TMP_DIR;<br> &nbsp; &nbsp;$project-&gt;checkout_vid(</span><span class="c3">&quot;${bid}f&quot;</span><span class="c0">, $TMP_DIR, </span><span class="c4">1</span><span class="c0">) </span><span class="c19">or</span><span class="c0">&nbsp;</span><span class="c19">die</span><span class="c0">&nbsp;</span><span class="c3">&quot;Cannot checkout fixed version&quot;</span><span class="c0">;<br> &nbsp; &nbsp;$project-&gt;sanity_check();<br>}<br><br></span><span class="c19">print</span><span class="c0">(</span><span class="c3">&quot;\n--- Add the following to the &lt;fileset&gt; tag identified by the id &#39;all.manual.tests&#39; in the &lt;PROJECT_ID.build.xml&gt; file ---\n&quot;</span><span class="c0">);<br></span><span class="c19">system</span><span class="c0">(</span><span class="c3">&quot;cat $ANALYZER_OUTPUT/*/includes | sort -u | while read -r include; do echo \&quot;&lt;include name=&#39;\&quot;\$include\&quot;&#39; /&gt;\&quot;; done&quot;</span><span class="c0">);<br></span><span class="c19">system</span><span class="c0">(</span><span class="c3">&quot;cat $ANALYZER_OUTPUT/*/excludes | sort -u | while read -r exclude; do echo \&quot;&lt;exclude name=&#39;\&quot;\$exclude\&quot;&#39; /&gt;\&quot;; done&quot;</span><span class="c0">);<br><br></span><span class="c19">system</span><span class="c0">(</span><span class="c3">&quot;rm -rf $TMP_DIR&quot;</span><span class="c0">) </span><span class="c19">unless</span><span class="c0">&nbsp;$DEBUG;</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.t5joaxhp6xc6"><span class="c29 c14">Step 8: Create Layout CSV File</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Normally, the initialize-revisions process can use the Defects4J layout analyzer to obtain the project layout. However, it supports Ant projects but not Gradle projects. Therefore, we manually create a layout file at framework/bug-mining/bug-mining-kafka/framework/projects/Kafka/dir-layout.csv:</span></p><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c46" colspan="1" rowspan="1"><p class="c27"><span class="c0">d62a42df2e24b7e12b7fae2ccd9c2931e62a95ae,metadata</span><span class="c10">/src/m</span><span class="c0">ain</span><span class="c10">/java,metadata/</span><span class="c0">src</span><span class="c10">/test/</span><span class="c0">java<br>fc786c335c6f51a9022b0190b15f57f42e4ea9ab,metadata</span><span class="c10">/src/m</span><span class="c0">ain</span><span class="c10">/java,metadata/</span><span class="c0">src</span><span class="c10">/test/</span><span class="c0">java</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.jfgtp4an4jfo"><span class="c29 c14">Step 9: Download the Gradle Version</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Download the corresponding version of Gradle, extract it, and place the lib folder in `defects4j/framework/bug-mining/bug-mining-kafka/framework/projects/Kafka/lib`:</span></p><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c32" colspan="1" rowspan="1"><p class="c11"><span class="c0">wget https:</span><span class="c10">//</span><span class="c0">services.gradle.org</span><span class="c10">/distributions/g</span><span class="c0">radle-</span><span class="c4">7.5</span><span class="c0">.</span><span class="c4">1</span><span class="c0">-all.zip</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.plltjourk32n"><span class="c29 c14">Step 10: Perform Sanity Check</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Run the command to perform the sanity check, which generates patches for the bug:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c32" colspan="1" rowspan="1"><p class="c11"><span class="c0">./initialize-revisions</span><span class="c2">.pl</span><span class="c0">&nbsp;-</span><span class="c19">p</span><span class="c0">&nbsp;</span><span class="c2">$PROJECT_ID</span><span class="c0">&nbsp;-w </span><span class="c2">$WORK_DIR</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Console output example:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c41" colspan="1" rowspan="1"><p class="c11"><span class="c0">(base) zuohancheng@MacBook-Pro</span><span class="c4">-9</span><span class="c0">&nbsp;bug-mining % sudo ./initialize-revisions.pl -p $PROJECT_ID -w $WORK_DIR<br>Password:<br></span><span class="c4">14265</span><span class="c0">: kafka<br>Checking out d62a42df to /tmp/initialize-revisions.pl_67862_1721649526/</span><span class="c4">1426</span><span class="c0">&nbsp;OK<br>Found build.gradle<br>Run Gradle build: d62a42df2e24b7e12b7fae2ccd9c2931e62a95ae................. OK<br>Created analyzer_output directory: /Users/zuohancheng/Desktop/defects4j/framework/bug-mining/bug-mining-kafka/framework/projects/Kafka/analyzer_output/</span><span class="c4">14265</span><span class="c0"><br>Calling determine_layout for revision: d62a42df2e24b7e12b7fae2ccd9c2931e62a95ae<br>Skipping subproject: examples (either source or test directory not found)<br>Skipping subproject: jmh-benchmarks (either source or test directory not found)<br>Skipping subproject: streams/streams-scala (either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-0100</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-0101</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-0102</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-0110</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-10</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-11</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-20</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-21</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-22</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-23</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-24</span><span class="c0">&nbsp;(either source or test directory not found)<br>Use </span><span class="c19">of</span><span class="c0">&nbsp;uninitialized value </span><span class="c19">in</span><span class="c0">&nbsp;concatenation (.) or string at ./initialize-revisions.pl line </span><span class="c4">187.</span><span class="c0"><br>Use </span><span class="c19">of</span><span class="c0">&nbsp;uninitialized value </span><span class="c19">in</span><span class="c0">&nbsp;concatenation (.) or string at ./initialize-revisions.pl line </span><span class="c4">187.</span><span class="c0"><br>Layout: src -&gt; , test -&gt; <br>Checking out fc786c33 to /tmp/initialize-revisions.pl_67862_1721649526/</span><span class="c4">1426</span><span class="c0">&nbsp;OK<br>Found build.gradle<br>Run Gradle build: fc786c335c6f51a9022b0190b15f57f42e4ea9ab................. OK<br>Created analyzer_output directory: /Users/zuohancheng/Desktop/defects4j/framework/bug-mining/bug-mining-kafka/framework/projects/Kafka/analyzer_output/</span><span class="c4">14265</span><span class="c0"><br>Calling determine_layout for revision: fc786c335c6f51a9022b0190b15f57f42e4ea9ab<br>Skipping subproject: examples (either source or test directory not found)<br>Skipping subproject: jmh-benchmarks (either source or test directory not found)<br>Skipping subproject: streams/streams-scala (either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-0100</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-0101</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-0102</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-0110</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-10</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-11</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-20</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-21</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-22</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-23</span><span class="c0">&nbsp;(either source or test directory not found)<br>Skipping subproject: streams/upgrade-</span><span class="c19">system</span><span class="c0">-tests</span><span class="c4">-24</span><span class="c0">&nbsp;(either source or test directory not found)<br>Use </span><span class="c19">of</span><span class="c0">&nbsp;uninitialized value </span><span class="c19">in</span><span class="c0">&nbsp;concatenation (.) or string at ./initialize-revisions.pl line </span><span class="c4">187.</span><span class="c0"><br>Use </span><span class="c19">of</span><span class="c0">&nbsp;uninitialized value </span><span class="c19">in</span><span class="c0">&nbsp;concatenation (.) or string at ./initialize-revisions.pl line </span><span class="c4">187.</span><span class="c0"><br>Layout: src -&gt; , test -&gt; <br>Diff fc786c33:d62a42df(metadata/src/main/java)............................. OK<br>Diff fc786c33:d62a42df(metadata/src/test/java)............................. OK<br>Cleaning working directory................................................. OK<br>Checking out fc786c33 to /tmp/initialize-revisions.pl_67862_1721649526..... OK<br>Init local repository...................................................... OK<br>Tag post-fix revision...................................................... OK<br>Dependency directory: /Users/zuohancheng/Desktop/defects4j/framework/bug-mining/bug-mining-kafka/framework/projects/Kafka/lib<br>Run post-checkout hook..................................................... OK<br>Initialize fixed program version........................................... OK<br>Apply patch................................................................ OK<br>Initialize buggy program version........................................... OK<br>Diff fc786c33:d62a42df..................................................... OK<br>Apply patch................................................................ OK<br>Tag pre-fix revision....................................................... OK<br>Check out program version: Kafka</span><span class="c4">-14265</span><span class="c0">f.................................... OK<br>Running ant (sanity.check)................................................. OK<br><br>--- Add the following to the &lt;fileset&gt; tag identified by the id </span><span class="c3">&#39;all.manual.tests&#39;</span><span class="c0">&nbsp;</span><span class="c19">in</span><span class="c0">&nbsp;the &lt;PROJECT_ID.build.xml&gt; file ---<br>cat: /Users/zuohancheng/Desktop/defects4j/framework/bug-mining/bug-mining-kafka/framework/projects/Kafka/analyzer_output</span><span class="c12">/*/includes: No such file or directory<br>cat: /Users/zuohancheng/Desktop/defects4j/framework/bug-mining/bug-mining-kafka/framework/projects/Kafka/analyzer_output/*/</span><span class="c0">excludes: No such file or directory</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c33 c36" id="h.rxa7way18z7"><span class="c29 c14">Step 11: Run the following command. </span></h2><p class="c24"><span class="c21 c14">After running this command, it will generate files in the $WORK_DIR/framework/projects/$PROJECT_ID/failing_tests directory containing all stack traces to ensure that test failures are due to valid reasons and not configuration errors. Additionally, it will generate a rev_pairs file in the bug-mining-kafka directory.</span></p><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c32" colspan="1" rowspan="1"><p class="c11"><span class="c0">./analyze-project.pl -p $PROJECT_ID \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -w $WORK_DIR \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -g $ISSUE_TRACKER_NAME \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -t $ISSUE_TRACKER_PROJECT_ID</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">The rev_pairs file contains the following information:</span></p><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c32" colspan="1" rowspan="1"><p class="c11"><span class="c0">project_id,version_id,tracker_name,tracker_id,diff_size_src,diff_size_test,compile_v2,compile_t2v2,num_fail_t2v2,compile_v1,compile_t2v1,minimized_src_patch,reviewed_tests_t2v2<br>Kafka,</span><span class="c4">14265</span><span class="c0">,jira,KAFKA,</span><span class="c4">108</span><span class="c0">,</span><span class="c4">36</span><span class="c0">,</span><span class="c4">1</span><span class="c0">,</span><span class="c4">1</span><span class="c0">,</span><span class="c4">2529</span><span class="c0">,</span><span class="c4">1</span><span class="c0">,</span><span class="c4">1</span><span class="c0">,-,-</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Console output example:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c34" colspan="1" rowspan="1"><p class="c11"><span class="c0">(base) zuohancheng@MacBook-Pro-9 bug-mining % sudo ./analyze-project.pl -p </span><span class="c2">$PROJECT_ID</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -w </span><span class="c2">$WORK_DIR</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -g </span><span class="c2">$ISSUE_TRACKER_NAME</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -t </span><span class="c2">$ISSUE_TRACKER_PROJECT_ID</span><span class="c0"><br>Password:<br>14265: kafka<br>Checking out fc786c33 </span><span class="c19">to</span><span class="c0">&nbsp;/tmp/analyze-project.pl_70455_1721654669</span><span class="c9">..........</span><span class="c0">&nbsp;OK<br>Init local repository</span><span class="c9">......................................................</span><span class="c0">&nbsp;OK<br>Tag post-fix revision</span><span class="c9">......................................................</span><span class="c0">&nbsp;OK<br>Dependency directory: /Users/zuohancheng/Desktop/defects4j/framework/bug-mining/bug-mining-kafka/framework/projects/Kafka/lib<br></span><span class="c9">Run</span><span class="c0">&nbsp;post-checkout hook</span><span class="c9">....................................................</span><span class="c0">. OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Initialize fixed program version</span><span class="c9">..........................................</span><span class="c0">. OK<br>Apply patch</span><span class="c9">................................................................</span><span class="c0">&nbsp;OK<br>Initialize buggy program version</span><span class="c9">..........................................</span><span class="c0">. OK<br>Diff fc786c33:d62a42df</span><span class="c9">....................................................</span><span class="c0">. OK<br>Apply patch</span><span class="c9">................................................................</span><span class="c0">&nbsp;OK<br>Tag pre-fix revision</span><span class="c9">......................................................</span><span class="c0">. OK<br>Check out program version: Kafka-14265f</span><span class="c9">....................................</span><span class="c0">&nbsp;OK<br>Running ant (compile)</span><span class="c9">......................................................</span><span class="c0">&nbsp;OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Check out program version: Kafka-14265b</span><span class="c9">....................................</span><span class="c0">&nbsp;OK<br>Running ant (compile)</span><span class="c9">......................................................</span><span class="c0">&nbsp;OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">At this point, checking the generated files in the failing_tests folder reveals many class not found issues, which are the main problem currently. The specific reason is not clear. Many methods have been tried, but the exact cause remains unknown. Below is an example of part of the test error stack trace:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c34" colspan="1" rowspan="1"><p class="c11"><span class="c0">--- clients</span><span class="c2">.build.classes.java.test.org.apache.kafka.clients.ApiVersionsTest</span><span class="c0"><br>java</span><span class="c2">.lang.ClassNotFoundException</span><span class="c0">: clients</span><span class="c2">.build.classes.java.test.org.apache.kafka.clients.ApiVersionsTest</span><span class="c0"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.AntClassLoader.findClassInComponents</span><span class="c0">(AntClassLoader</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1365</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.AntClassLoader.findClass</span><span class="c0">(AntClassLoader</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1315</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.AntClassLoader.loadClass</span><span class="c0">(AntClassLoader</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1068</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at java</span><span class="c2">.lang.ClassLoader.loadClass</span><span class="c0">(ClassLoader</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">351</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at java</span><span class="c2">.lang.Class.forName0</span><span class="c0">(Native Method)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at java</span><span class="c2">.lang.Class.forName</span><span class="c0">(Class</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">348</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run</span><span class="c0">(JUnitTestRunner</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">376</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.taskdefs.optional.junit.JUnitTask.executeInVM</span><span class="c0">(JUnitTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1484</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute</span><span class="c0">(JUnitTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">872</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.taskdefs.optional.junit.JUnitTask.executeOrQueue</span><span class="c0">(JUnitTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1972</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute1</span><span class="c0">(JUnitTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">824</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute</span><span class="c0">(JUnitTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">2277</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.UnknownElement.execute</span><span class="c0">(UnknownElement</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">291</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at sun</span><span class="c2">.reflect.GeneratedMethodAccessor4.invoke</span><span class="c0">(Unknown Source)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at sun</span><span class="c2">.reflect.DelegatingMethodAccessorImpl.invoke</span><span class="c0">(DelegatingMethodAccessorImpl</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">43</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at java</span><span class="c2">.lang.reflect.Method.invoke</span><span class="c0">(Method</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">498</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.dispatch.DispatchUtils.execute</span><span class="c0">(DispatchUtils</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">106</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.Task.perform</span><span class="c0">(Task</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">348</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.Target.execute</span><span class="c0">(Target</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">392</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.Target.performTasks</span><span class="c0">(Target</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">413</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.Project.executeSortedTargets</span><span class="c0">(Project</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1399</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.Project.executeTarget</span><span class="c0">(Project</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1368</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.helper.DefaultExecutor.executeTargets</span><span class="c0">(DefaultExecutor</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">41</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.Project.executeTargets</span><span class="c0">(Project</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1251</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.Main.runBuild</span><span class="c0">(Main</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">811</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.Main.startAnt</span><span class="c0">(Main</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">217</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.launch.Launcher.run</span><span class="c0">(Launcher</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">280</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at org</span><span class="c2">.apache.tools.ant.launch.Launcher.main</span><span class="c0">(Launcher</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">109</span><span class="c0 c14 c38">)<br>&#12290;&#12290;&#12290;</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.g8ovf598agj4"><span class="c14 c29">Step 12: Run the following command. </span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Theoretically (because it hasn&#39;t worked so far), after running this command, it should generate trigger test information in the $WORK_DIR/framework/projects/$PROJECT_ID/trigger_tests directory. Additionally, it will generate a trigger file in the bug-mining-kafka directory.</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c32" colspan="1" rowspan="1"><p class="c11"><span class="c0">./</span><span class="c9">get-trigger.pl</span><span class="c0">&nbsp;-p $</span><span class="c3">PROJECT_ID </span><span class="c0">-w $</span><span class="c3">WORK_DIR</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">This command failed. I believe the reason is that the v2 version (the fixed version) is required to pass all tests. From the get-trigger.pl script, you can see the relevant code below, which requires that the fixed version checked out does not have any failing tests. However, in the previous step, almost all tests failed due to missing classes in the failing_tests folder. This might be caused by path issues, but I&#39;m not sure why the paths are not found.</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c32" colspan="1" rowspan="1"><p class="c11"><span class="c12"># V2 must not have any failing tests</span><span class="c0"><br></span><span class="c19">my</span><span class="c0">&nbsp;$list = _get_failing_tests($project, </span><span class="c3">&quot;$TMP_DIR/v2&quot;</span><span class="c0">, </span><span class="c3">&quot;${bid}f&quot;</span><span class="c0">);<br></span><span class="c19">if</span><span class="c0">&nbsp;(($data{$FAIL_V2} = (</span><span class="c19">scalar</span><span class="c0">(@{$list-&gt;{</span><span class="c3">&quot;classes&quot;</span><span class="c0">}}) + </span><span class="c19">scalar</span><span class="c0">(@{$list-&gt;{</span><span class="c3">&quot;methods&quot;</span><span class="c0">}}))) != </span><span class="c4">0</span><span class="c0">) {<br> &nbsp; &nbsp;</span><span class="c19">print</span><span class="c0">(</span><span class="c3">&quot;Non expected failing test classes/methods on ${PID}-${bid}\n&quot;</span><span class="c0">);<br> &nbsp; &nbsp;_add_row(\%data);<br> &nbsp; &nbsp;</span><span class="c19">next</span><span class="c0">;<br>}</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">The trigger file contains the following information:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c32" colspan="1" rowspan="1"><p class="c11"><span class="c0">project_id,version_id,num_fail_t2v2,num_fail_classes_t2v1,num_fail_methods_t2v1,pass_iso_t2v2,fail_iso_t2v1<br>Kafka,14265,2,-,-,-,-</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Console output is as follows:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c43" colspan="1" rowspan="1"><p class="c11"><span class="c0">(base) zuohancheng@MacBook-Pro-9 bug-mining % sudo ./get-trigger.pl -p </span><span class="c2">$PROJECT_ID</span><span class="c0">&nbsp;-w </span><span class="c2">$WORK_DIR</span><span class="c0"><br>Password:<br>Smartmatch is deprecated at ./get-trigger.pl line 226.<br>Smartmatch is deprecated at ./get-trigger.pl line 229.<br>14265: kafka<br>Checking out fc786c33 </span><span class="c19">to</span><span class="c0">&nbsp;/tmp/get-trigger.pl_73243_1721658293/v2</span><span class="c9">..........</span><span class="c0">. OK<br>Init local repository</span><span class="c9">......................................................</span><span class="c0">&nbsp;OK<br>Tag post-fix revision</span><span class="c9">......................................................</span><span class="c0">&nbsp;OK<br>Dependency directory: /Users/zuohancheng/Desktop/defects4j/framework/bug-mining/bug-mining-kafka/framework/projects/Kafka/lib<br></span><span class="c9">Run</span><span class="c0">&nbsp;post-checkout hook</span><span class="c9">....................................................</span><span class="c0">. OK<br>Excluding broken/flaky tests</span><span class="c9">..............................................</span><span class="c0">. OK<br>Initialize fixed program version</span><span class="c9">..........................................</span><span class="c0">. OK<br>Apply patch</span><span class="c9">................................................................</span><span class="c0">&nbsp;OK<br>Initialize buggy program version</span><span class="c9">..........................................</span><span class="c0">. OK<br>Diff fc786c33:d62a42df</span><span class="c9">....................................................</span><span class="c0">. OK<br>Apply patch</span><span class="c9">................................................................</span><span class="c0">&nbsp;OK<br>Tag pre-fix revision</span><span class="c9">......................................................</span><span class="c0">. OK<br>Check out program version: Kafka-14265f</span><span class="c9">....................................</span><span class="c0">&nbsp;OK<br>Running ant (compile)</span><span class="c9">......................................................</span><span class="c0">&nbsp;OK<br>Running ant (compile.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Running ant (run.dev.tests)</span><span class="c9">................................................</span><span class="c0">&nbsp;OK<br>Non expected failing test classes/methods on Kafka-14265</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.8o2vysfci0qx"><span class="c29 c14">Step 13: Proceed to the next command. </span></h2><p class="c11 c25 c33"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">This step should determine the relevant metadata (i.e., modified classes, loaded classes, and relevant tests). However, the previous step did not identify trigger tests for this bug, so this step is evidently unachievable. I tried manually creating the trigger_tests, relevant_tests, modified_tests, and loaded_tests files in the corresponding folders, but it didn&#39;t work. Even pushing this way to the main repository, using the defects4j test command still couldn&#39;t recognize the trigger tests because the tests themselves failed due to missing classes.</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c31" colspan="1" rowspan="1"><p class="c11"><span class="c0">./</span><span class="c9">get-metadata.pl</span><span class="c0">&nbsp;-p $</span><span class="c3">PROJECT_ID </span><span class="c0">-w $</span><span class="c3">WORK_DIR</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Console output is as follows:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c31" colspan="1" rowspan="1"><p class="c11"><span class="c0">(</span><span class="c3">base)</span><span class="c0">&nbsp;</span><span class="c3">zuohancheng@MacBook-Pro-</span><span class="c0">9 </span><span class="c3">bug-mining </span><span class="c0">% ./</span><span class="c9">get-metadata.pl</span><span class="c0">&nbsp;-p $</span><span class="c3">PROJECT_ID </span><span class="c0">-w $</span><span class="c3">WORK_DIR<br>No bug ids are suitable to run </span><span class="c0">./</span><span class="c9">get-metadata.pl</span><span class="c0">&nbsp;</span><span class="c3">on at </span><span class="c0">./</span><span class="c9">get-metadata.pl</span><span class="c0">&nbsp;</span><span class="c3">line 278.</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.pv5vwa2kfc6a"><span class="c29 c14">Step 14: Manually create the relevant files in the trigger_tests, relevant_tests, modified_tests, and loaded_tests folders, and then forcefully push the current bug to the defects4j main database.</span></h2><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c32" colspan="1" rowspan="1"><p class="c11"><span class="c0">./promote-to-db</span><span class="c2">.pl</span><span class="c0">&nbsp;-</span><span class="c19">p</span><span class="c0">&nbsp;</span><span class="c2">$PROJECT_ID</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -w </span><span class="c2">$WORK_DIR</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -r </span><span class="c2">$WORK_DIR</span><span class="c0">/project_repos/</span><span class="c2">$PROJECT_NAME.git</span><span class="c0">&nbsp;\<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -</span><span class="c19">b</span><span class="c0">&nbsp;</span><span class="c4">14265</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">For example, in the trigger_tests folder, there is a file named 14265, which corresponds to the trigger test for this bug fix:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c53" colspan="1" rowspan="1"><p class="c11"><span class="c0">--- org</span><span class="c2">.apache.kafka.metadata.authorizer.StandardAuthorizerTest</span><span class="c0">::testPrefixAcls<br>org</span><span class="c2">.opentest4j.AssertionFailedError</span><span class="c0">: expected: &lt;[ALLOWED, DENIED, ALLOWED]&gt; but was: &lt;[DENIED, DENIED, ALLOWED]&gt;<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.api.AssertionFailureBuilder.build</span><span class="c0">(AssertionFailureBuilder</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">151</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow</span><span class="c0">(AssertionFailureBuilder</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">132</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.api.AssertEquals.failNotEqual</span><span class="c0">(AssertEquals</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">197</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.api.AssertEquals.assertEquals</span><span class="c0">(AssertEquals</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">182</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.api.AssertEquals.assertEquals</span><span class="c0">(AssertEquals</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">177</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.api.Assertions.assertEquals</span><span class="c0">(Assertions</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1141</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testPrefixAcls</span><span class="c0">(StandardAuthorizerTest</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">656</span><span class="c0">)<br> &nbsp; &nbsp;at sun</span><span class="c2">.reflect.NativeMethodAccessorImpl.invoke0</span><span class="c0">(Native Method)<br> &nbsp; &nbsp;at sun</span><span class="c2">.reflect.NativeMethodAccessorImpl.invoke</span><span class="c0">(NativeMethodAccessorImpl</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">62</span><span class="c0">)<br> &nbsp; &nbsp;at sun</span><span class="c2">.reflect.DelegatingMethodAccessorImpl.invoke</span><span class="c0">(DelegatingMethodAccessorImpl</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">43</span><span class="c0">)<br> &nbsp; &nbsp;at java</span><span class="c2">.lang.reflect.Method.invoke</span><span class="c0">(Method</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">498</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.commons.util.ReflectionUtils.invokeMethod</span><span class="c0">(ReflectionUtils</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">727</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.execution.MethodInvocation.proceed</span><span class="c0">(MethodInvocation</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">60</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation</span><span class="c0">.proceed(InvocationInterceptorChain</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">131</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.extension.SameThreadTimeoutInvocation.proceed</span><span class="c0">(SameThreadTimeoutInvocation</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">45</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.extension.TimeoutExtension.intercept</span><span class="c0">(TimeoutExtension</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">156</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod</span><span class="c0">(TimeoutExtension</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">147</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod</span><span class="c0">(TimeoutExtension</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">86</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall</span><span class="c0">.lambda</span><span class="c2">$ofVoidMethod</span><span class="c0">$</span><span class="c4">0</span><span class="c0">(InterceptingExecutableInvoker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">103</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke</span><span class="c0">$</span><span class="c4">0</span><span class="c0">(InterceptingExecutableInvoker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">93</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation</span><span class="c0">.proceed(InvocationInterceptorChain</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">106</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed</span><span class="c0">(InvocationInterceptorChain</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">64</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke</span><span class="c0">(InvocationInterceptorChain</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">45</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke</span><span class="c0">(InvocationInterceptorChain</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">37</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke</span><span class="c0">(InterceptingExecutableInvoker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">92</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke</span><span class="c0">(InterceptingExecutableInvoker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">86</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod</span><span class="c0">$</span><span class="c4">7</span><span class="c0">(TestMethodTestDescriptor</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">217</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.ThrowableCollector.execute</span><span class="c0">(ThrowableCollector</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">73</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod</span><span class="c0">(TestMethodTestDescriptor</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">213</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute</span><span class="c0">(TestMethodTestDescriptor</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">138</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute</span><span class="c0">(TestMethodTestDescriptor</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">68</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively</span><span class="c0">$</span><span class="c4">6</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">151</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.ThrowableCollector.execute</span><span class="c0">(ThrowableCollector</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">73</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively</span><span class="c0">$</span><span class="c4">8</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">141</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.Node.around</span><span class="c0">(Node</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">137</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively</span><span class="c0">$</span><span class="c4">9</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">139</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.ThrowableCollector.execute</span><span class="c0">(ThrowableCollector</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">73</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">138</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.execute</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">95</span><span class="c0">)<br> &nbsp; &nbsp;at java</span><span class="c2">.util.ArrayList.forEach</span><span class="c0">(ArrayList</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1259</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll</span><span class="c0">(SameThreadHierarchicalTestExecutorService</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">41</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively</span><span class="c0">$</span><span class="c4">6</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">155</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.ThrowableCollector.execute</span><span class="c0">(ThrowableCollector</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">73</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively</span><span class="c0">$</span><span class="c4">8</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">141</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.Node.around</span><span class="c0">(Node</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">137</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively</span><span class="c0">$</span><span class="c4">9</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">139</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.ThrowableCollector.execute</span><span class="c0">(ThrowableCollector</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">73</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">138</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.execute</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">95</span><span class="c0">)<br> &nbsp; &nbsp;at java</span><span class="c2">.util.ArrayList.forEach</span><span class="c0">(ArrayList</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">1259</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll</span><span class="c0">(SameThreadHierarchicalTestExecutorService</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">41</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively</span><span class="c0">$</span><span class="c4">6</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">155</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.ThrowableCollector.execute</span><span class="c0">(ThrowableCollector</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">73</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively</span><span class="c0">$</span><span class="c4">8</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">141</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.Node.around</span><span class="c0">(Node</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">137</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively</span><span class="c0">$</span><span class="c4">9</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">139</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.ThrowableCollector.execute</span><span class="c0">(ThrowableCollector</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">73</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">138</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.NodeTestTask.execute</span><span class="c0">(NodeTestTask</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">95</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit</span><span class="c0">(SameThreadHierarchicalTestExecutorService</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">35</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute</span><span class="c0">(HierarchicalTestExecutor</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">57</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute</span><span class="c0">(HierarchicalTestEngine</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">54</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.launcher.core.EngineExecutionOrchestrator.execute</span><span class="c0">(EngineExecutionOrchestrator</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">107</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.launcher.core.EngineExecutionOrchestrator.execute</span><span class="c0">(EngineExecutionOrchestrator</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">88</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute</span><span class="c0">$</span><span class="c4">0</span><span class="c0">(EngineExecutionOrchestrator</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">54</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams</span><span class="c0">(EngineExecutionOrchestrator</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">67</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.launcher.core.EngineExecutionOrchestrator.execute</span><span class="c0">(EngineExecutionOrchestrator</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">52</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.launcher.core.DefaultLauncher.execute</span><span class="c0">(DefaultLauncher</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">114</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.launcher.core.DefaultLauncher.execute</span><span class="c0">(DefaultLauncher</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">86</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher</span><span class="c0">.execute(DefaultLauncherSession</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">86</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.junit.platform.launcher.core.SessionPerRequestLauncher.execute</span><span class="c0">(SessionPerRequestLauncher</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">53</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor</span><span class="c0">.processAllTestClasses(JUnitPlatformTestClassProcessor</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">99</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor</span><span class="c0">.access$</span><span class="c4">000</span><span class="c0">(JUnitPlatformTestClassProcessor</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">79</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop</span><span class="c0">(JUnitPlatformTestClassProcessor</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">75</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop</span><span class="c0">(SuiteTestClassProcessor</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">61</span><span class="c0">)<br> &nbsp; &nbsp;at sun</span><span class="c2">.reflect.NativeMethodAccessorImpl.invoke0</span><span class="c0">(Native Method)<br> &nbsp; &nbsp;at sun</span><span class="c2">.reflect.NativeMethodAccessorImpl.invoke</span><span class="c0">(NativeMethodAccessorImpl</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">62</span><span class="c0">)<br> &nbsp; &nbsp;at sun</span><span class="c2">.reflect.DelegatingMethodAccessorImpl.invoke</span><span class="c0">(DelegatingMethodAccessorImpl</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">43</span><span class="c0">)<br> &nbsp; &nbsp;at java</span><span class="c2">.lang.reflect.Method.invoke</span><span class="c0">(Method</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">498</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.internal.dispatch.ReflectionDispatch.dispatch</span><span class="c0">(ReflectionDispatch</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">36</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.internal.dispatch.ReflectionDispatch.dispatch</span><span class="c0">(ReflectionDispatch</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">24</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch</span><span class="c0">(ContextClassLoaderDispatch</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">33</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler</span><span class="c0">.invoke(ProxyDispatchAdapter</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">94</span><span class="c0">)<br> &nbsp; &nbsp;at com</span><span class="c2">.sun.proxy</span><span class="c0">.</span><span class="c2">$Proxy2</span><span class="c0">.stop(Unknown Source)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.api.internal.tasks.testing.worker.TestWorker</span><span class="c0">$</span><span class="c4">3</span><span class="c0">.run(TestWorker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">193</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName</span><span class="c0">(TestWorker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">129</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.api.internal.tasks.testing.worker.TestWorker.execute</span><span class="c0">(TestWorker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">100</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.api.internal.tasks.testing.worker.TestWorker.execute</span><span class="c0">(TestWorker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">60</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.process.internal.worker.child.ActionExecutionWorker.execute</span><span class="c0">(ActionExecutionWorker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">56</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call</span><span class="c0">(SystemApplicationClassLoaderWorker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">133</span><span class="c0">)<br> &nbsp; &nbsp;at org</span><span class="c2">.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call</span><span class="c0">(SystemApplicationClassLoaderWorker</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">71</span><span class="c0">)<br> &nbsp; &nbsp;at worker</span><span class="c2">.org.gradle.process.internal.worker.GradleWorkerMain.run</span><span class="c0">(GradleWorkerMain</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">69</span><span class="c0">)<br> &nbsp; &nbsp;at worker</span><span class="c2">.org.gradle.process.internal.worker.GradleWorkerMain.main</span><span class="c0">(GradleWorkerMain</span><span class="c2">.java</span><span class="c0">:</span><span class="c4">74</span><span class="c0">)</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Console output is as follows:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c26" colspan="1" rowspan="1"><p class="c11"><span class="c0">(base) zuohancheng</span><span class="c49">@MacBook</span><span class="c0">-Pro</span><span class="c4">-9</span><span class="c0">&nbsp;bug-mining % ./promote-to-db.pl -p $PROJECT_ID \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -w $WORK_DIR \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -r $WORK_DIR</span><span class="c10">/project_repos/</span><span class="c0">$PROJECT_NAME.git \<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -b </span><span class="c4">14265</span><span class="c0"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... copying </span><span class="c10">/Users/</span><span class="c0">zuohancheng</span><span class="c10">/Desktop/</span><span class="c0">defects4j</span><span class="c10">/framework/</span><span class="c0">bug-mining</span><span class="c10">/bug-mining-kafka/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka</span><span class="c10">/build.xml.patch -&gt; /</span><span class="c0">Users</span><span class="c10">/zuohancheng/</span><span class="c0">Desktop</span><span class="c10">/defects4j/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka/build.xml.patch<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... OK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... copying </span><span class="c10">/Users/</span><span class="c0">zuohancheng</span><span class="c10">/Desktop/</span><span class="c0">defects4j</span><span class="c10">/framework/</span><span class="c0">bug-mining</span><span class="c10">/bug-mining-kafka/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka</span><span class="c10">/Kafka.build.xml -&gt; /</span><span class="c0">Users</span><span class="c10">/zuohancheng/</span><span class="c0">Desktop</span><span class="c10">/defects4j/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka/Kafka.build.xml<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... OK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... copying </span><span class="c10">/Users/</span><span class="c0">zuohancheng</span><span class="c10">/Desktop/</span><span class="c0">defects4j</span><span class="c10">/framework/</span><span class="c0">bug-mining</span><span class="c10">/bug-mining-kafka/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka</span><span class="c10">/lib -&gt; /</span><span class="c0">Users</span><span class="c10">/zuohancheng/</span><span class="c0">Desktop</span><span class="c10">/defects4j/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka/lib<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... OK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... copying </span><span class="c10">/Users/</span><span class="c0">zuohancheng</span><span class="c10">/Desktop/</span><span class="c0">defects4j</span><span class="c10">/framework/</span><span class="c0">bug-mining</span><span class="c10">/bug-mining-kafka/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka</span><span class="c10">/deprecated-bugs.csv -&gt; /</span><span class="c0">Users</span><span class="c10">/zuohancheng/</span><span class="c0">Desktop</span><span class="c10">/defects4j/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka/deprecated-bugs.csv<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... OK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... appending </span><span class="c10">/Users/</span><span class="c0">zuohancheng</span><span class="c10">/Desktop/</span><span class="c0">defects4j</span><span class="c10">/framework/</span><span class="c0">bug-mining</span><span class="c10">/bug-mining-kafka/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka</span><span class="c10">/dependent_tests -&gt; /</span><span class="c0">Users</span><span class="c10">/zuohancheng/</span><span class="c0">Desktop</span><span class="c10">/defects4j/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka/dependent_tests<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... appending </span><span class="c10">/Users/</span><span class="c0">zuohancheng</span><span class="c10">/Desktop/</span><span class="c0">defects4j</span><span class="c10">/framework/</span><span class="c0">bug-mining</span><span class="c10">/bug-mining-kafka/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka</span><span class="c10">/dir-layout.csv -&gt; /</span><span class="c0">Users</span><span class="c10">/zuohancheng/</span><span class="c0">Desktop</span><span class="c10">/defects4j/</span><span class="c0">framework</span><span class="c10">/projects/</span><span class="c0">Kafka/dir-layout.csv<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... OK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... copying </span><span class="c10">/Users/</span><span class="c0">zuohancheng</span><span class="c10">/Desktop/</span><span class="c0">defects4j</span><span class="c10">/framework/</span><span class="c0">bug-mining</span><span class="c10">/bug-mining-kafka/</span><span class="c0">framework</span><span class="c10">/core/</span><span class="c0">Project</span><span class="c10">/Kafka.pm -&gt; /</span><span class="c0">Users</span><span class="c10">/zuohancheng/</span><span class="c0">Desktop</span><span class="c10">/defects4j/</span><span class="c0">framework</span><span class="c10">/core/</span><span class="c0">Project/Kafka.pm<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... OK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... copying </span><span class="c10">/Users/</span><span class="c0">zuohancheng</span><span class="c10">/Desktop/</span><span class="c0">defects4j</span><span class="c10">/framework/</span><span class="c0">bug-mining</span><span class="c10">/bug-mining-kafka/</span><span class="c0">project_repos</span><span class="c10">/kafka.git -&gt; /</span><span class="c0">Users</span><span class="c10">/zuohancheng/</span><span class="c0">Desktop</span><span class="c10">/defects4j/</span><span class="c0">project_repos<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... OK</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33 c39" id="h.pg0pzlx0y437"><span class="c29 c14"></span></h2><h2 class="c36 c33" id="h.wvut9ewozp97"><span class="c29 c14">Step 15: We can now try to use the defects4j command to view the information of the Kafka project. Copy active-bugs.csv to the defects4j/framework/projects/Kafka directory.</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c50" colspan="1" rowspan="1"><p class="c11"><span class="c0">(base) zuohancheng@MacBook-Pro-9 bug-mining % defects4j info -p Kafka <br>Summary of configuration </span><span class="c19">for</span><span class="c0">&nbsp;Project: Kafka<br>--------------------------------------------------------------------------------<br> &nbsp; &nbsp;Script dir: /Users/zuohancheng/Desktop/defects4j/framework<br> &nbsp; &nbsp; &nbsp;Base dir: /Users/zuohancheng/Desktop/defects4j<br> &nbsp; &nbsp;Major root: /Users/zuohancheng/Desktop/defects4j/major<br> &nbsp; &nbsp; &nbsp;Repo dir: /Users/zuohancheng/Desktop/defects4j/project_repos<br>--------------------------------------------------------------------------------<br> &nbsp; &nbsp;Project ID: Kafka<br> &nbsp; &nbsp; &nbsp; Program: kafka<br> &nbsp; &nbsp;Build file: /Users/zuohancheng/Desktop/defects4j/framework/projects/Kafka/Kafka.build.xml<br>--------------------------------------------------------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Vcs: Vcs::Git<br> &nbsp; &nbsp;Repository: /Users/zuohancheng/Desktop/defects4j/project_repos/kafka.git<br> &nbsp; &nbsp; Commit db: /Users/zuohancheng/Desktop/defects4j/framework/projects/Kafka/active-bugs.csv<br>Number of bugs: 1<br>--------------------------------------------------------------------------------</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c42" colspan="1" rowspan="1"><p class="c11"><span class="c0">(base) zuohancheng@MacBook-Pro-9 bug-mining % defects4j info -p Kafka -b 14265 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>Determine revision date.................................................... OK<br>Summary of configuration </span><span class="c19">for</span><span class="c0">&nbsp;Project: Kafka<br>--------------------------------------------------------------------------------<br> &nbsp; &nbsp;Script dir: /Users/zuohancheng/Desktop/defects4j/framework<br> &nbsp; &nbsp; &nbsp;Base dir: /Users/zuohancheng/Desktop/defects4j<br> &nbsp; &nbsp;Major root: /Users/zuohancheng/Desktop/defects4j/major<br> &nbsp; &nbsp; &nbsp;Repo dir: /Users/zuohancheng/Desktop/defects4j/project_repos<br>--------------------------------------------------------------------------------<br> &nbsp; &nbsp;Project ID: Kafka<br> &nbsp; &nbsp; &nbsp; Program: kafka<br> &nbsp; &nbsp;Build file: /Users/zuohancheng/Desktop/defects4j/framework/projects/Kafka/Kafka.build.xml<br>--------------------------------------------------------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Vcs: Vcs::Git<br> &nbsp; &nbsp;Repository: /Users/zuohancheng/Desktop/defects4j/project_repos/kafka.git<br> &nbsp; &nbsp; Commit db: /Users/zuohancheng/Desktop/defects4j/framework/projects/Kafka/active-bugs.csv<br>Number of bugs: 1<br>--------------------------------------------------------------------------------<br><br>Summary </span><span class="c19">for</span><span class="c0">&nbsp;Bug: Kafka-14265<br>--------------------------------------------------------------------------------<br>Revision ID (fixed version):<br>fc786c335c6f51a9022b0190b15f57f42e4ea9ab<br>--------------------------------------------------------------------------------<br>Revision date (fixed version):<br>2022-09-28 22:58:39 -0700<br>--------------------------------------------------------------------------------<br>Bug report id:<br>KAFKA-14265<br>--------------------------------------------------------------------------------<br>Bug report url:<br>https://issues.apache.org/jira/browse/KAFKA-14265<br>--------------------------------------------------------------------------------<br>Root cause </span><span class="c19">in</span><span class="c0">&nbsp;triggering tests:<br> - org.apache.kafka.metadata.authorizer.StandardAuthorizerTest::testPrefixAcls<br> &nbsp; --&gt; org.opentest4j.AssertionFailedError: expected: &lt;[ALLOWED, DENIED, ALLOWED]&gt; but was: &lt;[DENIED, DENIED, ALLOWED]&gt;<br>--------------------------------------------------------------------------------<br>List of modified sources:<br> - org.apache.kafka.metadata.authorizer.StandardAuthorizerData<br>--------------------------------------------------------------------------------</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.b57walf41wmj"><span class="c29 c14">Step 16: Try using the defects4j command to check out the buggy and fixed versions. Although the two versions are checked out, compiled, and tested, we find that the trigger tests did not take effect. The revision and buggy versions have the same number of failing tests, indicating a configuration issue causing all tests to fail. </span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Check out the fixed version:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c32" colspan="1" rowspan="1"><p class="c11"><span class="c0">defects4j checkout -p Kafka -v 14265f -w /tmp/kafka_14265_fixed<br></span><span class="c9">cd</span><span class="c0">&nbsp;/tmp/kafka_14265_fixed<br>defects4j compile<br>defects4j </span><span class="c9">test</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Console output is as follows:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c54" colspan="1" rowspan="1"><p class="c11"><span class="c0">(base) zuohancheng@MacBook-Pro-9 bug-mining % defects4j checkout -p Kafka -v 14265f -w /tmp/kafka_14265_fixed &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>Checking out fc786c33 to /tmp/kafka_14265_fixed............................ OK<br>Init </span><span class="c9">local</span><span class="c0">&nbsp;repository...................................................... OK<br>Tag post-fix revision...................................................... OK<br>Dependency directory: /Users/zuohancheng/Desktop/defects4j/framework/projects/Kafka/lib<br>Run post-checkout hook..................................................... OK<br>Initialize fixed program version........................................... OK<br>Apply patch................................................................ OK<br>Initialize buggy program version........................................... OK<br>Diff fc786c33:d62a42df..................................................... OK<br>Apply patch................................................................ OK<br>Tag pre-fix revision....................................................... OK<br>Check out program version: Kafka-14265f.................................... OK<br><br>(base) zuohancheng@MacBook-Pro-9 kafka_14265_fixed % defects4j compile<br>Running ant (compile)...................................................... OK<br>Running ant (compile.tests)................................................ OK<br><br>(base) zuohancheng@MacBook-Pro-9 kafka_14265_fixed % defects4j </span><span class="c9">test</span><span class="c0"><br>Running ant (compile.tests)................................................ OK<br>Running ant (run.dev.tests)................................................ OK<br>Failing tests: 2511<br> &nbsp;- .gradle_local_home.wrapper.dists.gradle-7.5.1-all.aw0xsrbq07qdp8ysrqsmgg202.gradle-7.5.1.src.testing-jvm.org.gradle.api.tasks.testing.Test<br> &nbsp;- .gradle_local_home.wrapper.dists.gradle-7.5.1-all.aw0xsrbq07qdp8ysrqsmgg202.gradle-7.5.1.src.testing-native.org.gradle.nativeplatform.test.xctest.tasks.XCTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.ApiVersionsTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.ClientUtilsTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.ClusterConnectionStatesTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.CommonClientConfigsTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.FetchSessionHandlerTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.InFlightRequestsTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.MetadataCacheTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.MetadataTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.NetworkClientTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.NodeApiVersionsTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.admin.ConfigTest<br> &nbsp;...<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.PayloadGeneratorTest<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.ThrottleTest<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.TimeIntervalTransactionsGeneratorTest<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.TopicsSpecTest</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Check out the buggy version:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c32" colspan="1" rowspan="1"><p class="c11"><span class="c0">defects4j checkout -p Kafka -v 14265b -w /tmp/kafka_14265_buggy<br></span><span class="c9">cd</span><span class="c0">&nbsp;/tmp/kafka_14265_buggy<br>defects4j compile<br>defects4j </span><span class="c9">test</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">Console output is as follows:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c44" colspan="1" rowspan="1"><p class="c11"><span class="c0">(base) zuohancheng@MacBook-Pro-9 kafka_14265_fixed % defects4j checkout -p Kafka -v 14265b -w /tmp/kafka_14265_buggy<br>Checking out fc786c33 to /tmp/kafka_14265_buggy............................ OK<br>Init </span><span class="c9">local</span><span class="c0">&nbsp;repository...................................................... OK<br>Tag post-fix revision...................................................... OK<br>Dependency directory: /Users/zuohancheng/Desktop/defects4j/framework/projects/Kafka/lib<br>Run post-checkout hook..................................................... OK<br>Initialize fixed program version........................................... OK<br>Apply patch................................................................ OK<br>Initialize buggy program version........................................... OK<br>Diff fc786c33:d62a42df..................................................... OK<br>Apply patch................................................................ OK<br>Tag pre-fix revision....................................................... OK<br>Check out program version: Kafka-14265b.................................... OK<br><br>(base) zuohancheng@MacBook-Pro-9 kafka_14265_buggy % defects4j compile<br>Running ant (compile)...................................................... OK<br>Running ant (compile.tests)................................................ OK<br><br>(base) zuohancheng@MacBook-Pro-9 kafka_14265_buggy % defects4j </span><span class="c9">test</span><span class="c0"><br>Running ant (compile.tests)................................................ OK<br>Running ant (run.dev.tests)................................................ OK<br>Failing tests: 2511<br> &nbsp;- .gradle_local_home.wrapper.dists.gradle-7.5.1-all.aw0xsrbq07qdp8ysrqsmgg202.gradle-7.5.1.src.testing-jvm.org.gradle.api.tasks.testing.Test<br> &nbsp;- .gradle_local_home.wrapper.dists.gradle-7.5.1-all.aw0xsrbq07qdp8ysrqsmgg202.gradle-7.5.1.src.testing-native.org.gradle.nativeplatform.test.xctest.tasks.XCTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.ApiVersionsTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.ClientUtilsTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.ClusterConnectionStatesTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.CommonClientConfigsTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.FetchSessionHandlerTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.InFlightRequestsTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.MetadataCacheTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.MetadataTest<br> &nbsp;- clients.build.classes.java.test.org.apache.kafka.clients.NetworkClientTest<br> &nbsp;...<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.task.TaskSpecTest<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.ConsumeBenchSpecTest<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.ExternalCommandWorkerTest<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.HistogramTest<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.PayloadGeneratorTest<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.ThrottleTest<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.TimeIntervalTransactionsGeneratorTest<br> &nbsp;- trogdor.src.test.java.org.apache.kafka.trogdor.workload.TopicsSpecTest</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p><h2 class="c36 c33" id="h.8lpvxify3lir"><span class="c29 c14">Step 17: We attempt to run only the test written in the fixed commit on the checked-out buggy and fixed versions to see if it can successfully fail in the buggy version and pass in the fixed version. The result shows that the test does indeed do so.</span></h2><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">For the Kafka-14265 bug, the test written in the fixed commit is org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.</span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">This is the console output after running this test on the buggy version, showing that the test indeed failed:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c43" colspan="1" rowspan="1"><p class="c11"><span class="c0">(base) zuohancheng@MacBook-Pro-9 kafka_14265_buggy % ./gradlew :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;--tests </span><span class="c3">&quot;org.apache.kafka.metadata.authorizer.StandardAuthorizerTest&quot;</span><span class="c0"><br>Downloading file:/Users/zuohancheng/Desktop/defects4j/framework/lib/build_systems/gradle/dists/gradle-7.5.1-all.zip<br>...............10%................20%................30%................40%................50%................60%...............70%................80%................90%................100%<br>To honour the JVM settings </span><span class="c19">for</span><span class="c0">&nbsp;this build a single-use Daemon process will be forked. See https://docs.gradle.org/7.5.1/userguide/gradle_daemon.html</span><span class="c12">#sec:disabling_the_daemon.</span><span class="c0"><br>Daemon will be stopped at the end of the build <br><br>&gt; Configure project :<br>Starting build with version 3.4.0-SNAPSHOT (commit id 9ce127f1) using Gradle 7.5.1, Java 1.8 and Scala 2.13.8<br>Build properties: maxParallelForks=8, maxScalacThreads=8, maxTestRetries=0<br><br>&gt; Task :metadata:</span><span class="c9">test</span><span class="c0"><br>org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testPrefixAcls() failed, </span><span class="c9">log</span><span class="c0">&nbsp;available </span><span class="c19">in</span><span class="c0">&nbsp;/private/tmp/kafka_14265_buggy/metadata/build/reports/testOutput/org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testPrefixAcls().test.stdout<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testPrefixAcls() FAILED<br> &nbsp; &nbsp;org.opentest4j.AssertionFailedError: expected: &lt;[ALLOWED, DENIED, ALLOWED]&gt; but was: &lt;[DENIED, DENIED, ALLOWED]&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)<br> &nbsp; &nbsp; &nbsp; &nbsp;at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)<br> &nbsp; &nbsp; &nbsp; &nbsp;at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)<br> &nbsp; &nbsp; &nbsp; &nbsp;at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)<br> &nbsp; &nbsp; &nbsp; &nbsp;at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)<br> &nbsp; &nbsp; &nbsp; &nbsp;at org.junit.jupiter.api.Assertions.assertEquals(<br><br>Assertions.java:1141)<br> &nbsp; &nbsp; &nbsp; &nbsp;at org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testPrefixAcls(StandardAuthorizerTest.java:656)<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testFindResultPrincipalMatching() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testAuthorizationWithManyAcls() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testAllowAuditLogging(boolean) &gt; org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testAllowAuditLogging(boolean)[1] PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testAllowAuditLogging(boolean) &gt; org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testAllowAuditLogging(boolean)[2] PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testGetDefaultResult() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testStartWithEarlyStartListeners() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testDenyAuditLogging(boolean) &gt; org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testDenyAuditLogging(boolean)[1] PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testDenyAuditLogging(boolean) &gt; org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testDenyAuditLogging(boolean)[2] PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testTopicAclWithOperationAll() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testDenyPrecedenceWithOperationAll() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testConfigure() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testAuthorizationPriorToCompleteInitialLoad() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testHostAddressAclValidation() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testCompleteInitialLoad() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testCompleteInitialLoadWithException() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testFindResultImplication() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testGetConfiguredSuperUsers() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testSimpleAuthorizations() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testListAcls() PASSED<br><br>20 tests completed, 1 failed<br><br>&gt; Task :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;FAILED<br><br>FAILURE: Build failed with an exception.<br><br>* What went wrong:<br>Execution failed </span><span class="c19">for</span><span class="c0">&nbsp;task </span><span class="c3">&#39;:metadata:test&#39;</span><span class="c0">.<br>&gt; There were failing tests. See the report at: file:///private/tmp/kafka_14265_buggy/metadata/build/reports/tests/</span><span class="c9">test</span><span class="c0">/index.html<br><br>* Try:<br>&gt; Run with --stacktrace option to get the stack trace.<br>&gt; Run with --info or --debug option to get more </span><span class="c9">log</span><span class="c0">&nbsp;output.<br>&gt; Run with --scan to get full insights.<br><br>* Get more </span><span class="c9">help</span><span class="c0">&nbsp;at https://help.gradle.org<br><br>BUILD FAILED </span><span class="c19">in</span><span class="c0">&nbsp;23s<br>30 actionable tasks: 1 executed, 29 up-to-date</span></p></td></tr></table><p class="c18"><span class="c14 c21"></span></p><p class="c18"><span class="c21 c14"></span></p><p class="c24"><span class="c21 c14">This is the console output after running the corresponding test on the fixed version, proving that the test passed:</span></p><p class="c18"><span class="c21 c14"></span></p><table class="c22"><tr class="c5"><td class="c28" colspan="1" rowspan="1"><p class="c11"><span class="c0">(base) zuohancheng@MacBook-Pro-9 kafka_14265_fixed % ./gradlew :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;--tests </span><span class="c3">&quot;org.apache.kafka.metadata.authorizer.StandardAuthorizerTest&quot;</span><span class="c0"><br>To honour the JVM settings </span><span class="c19">for</span><span class="c0">&nbsp;this build a single-use Daemon process will be forked. See https://docs.gradle.org/7.5.1/userguide/gradle_daemon.html</span><span class="c12">#sec:disabling_the_daemon.</span><span class="c0"><br>Daemon will be stopped at the end of the build <br><br>&gt; Configure project :<br>Starting build with version 3.4.0-SNAPSHOT (commit id 26d74f89) using Gradle 7.5.1, Java 1.8 and Scala 2.13.8<br>Build properties: maxParallelForks=8, maxScalacThreads=8, maxTestRetries=0<br><br>&gt; Task :metadata:</span><span class="c9">test</span><span class="c0"><br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testPrefixAcls() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testFindResultPrincipalMatching() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testAuthorizationWithManyAcls() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testAllowAuditLogging(boolean) &gt; org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testAllowAuditLogging(boolean)[1] PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testAllowAuditLogging(boolean) &gt; org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testAllowAuditLogging(boolean)[2] PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testGetDefaultResult() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testStartWithEarlyStartListeners() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testDenyAuditLogging(boolean) &gt; org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testDenyAuditLogging(boolean)[1] PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testDenyAuditLogging(boolean) &gt; org.apache.kafka.metadata.authorizer.StandardAuthorizerTest.testDenyAuditLogging(boolean)[2] PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testTopicAclWithOperationAll() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testDenyPrecedenceWithOperationAll() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testConfigure() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testAuthorizationPriorToCompleteInitialLoad() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testHostAddressAclValidation() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testCompleteInitialLoad() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testCompleteInitialLoadWithException() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testFindResultImplication() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testGetConfiguredSuperUsers() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testSimpleAuthorizations() PASSED<br><br>Gradle Test Run :metadata:</span><span class="c9">test</span><span class="c0">&nbsp;&gt; Gradle Test Executor 1 &gt; StandardAuthorizerTest &gt; testListAcls() PASSED<br><br>BUILD SUCCESSFUL </span><span class="c19">in</span><span class="c0">&nbsp;17s<br>30 actionable tasks: 1 executed, 29 up-to-date</span></p></td></tr></table><p class="c18"><span class="c21 c14"></span></p><p class="c18"><span class="c21 c14"></span></p></body></html>